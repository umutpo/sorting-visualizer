{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append, clearNode, createStyleSheet } from '../../dom.js';\nimport { List } from '../list/listWidget.js';\nimport { SplitView } from '../splitview/splitview.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport './table.css';\n\nclass TableListRenderer {\n  constructor(columns, renderers, getColumnSize) {\n    this.columns = columns;\n    this.getColumnSize = getColumnSize;\n    this.templateId = TableListRenderer.TemplateId;\n    this.renderedTemplates = new Set();\n    const rendererMap = new Map(renderers.map(r => [r.templateId, r]));\n    this.renderers = [];\n\n    for (const column of columns) {\n      const renderer = rendererMap.get(column.templateId);\n\n      if (!renderer) {\n        throw new Error(`Table cell renderer for template id ${column.templateId} not found.`);\n      }\n\n      this.renderers.push(renderer);\n    }\n  }\n\n  renderTemplate(container) {\n    const rowContainer = append(container, $('.monaco-table-tr'));\n    const cellContainers = [];\n    const cellTemplateData = [];\n\n    for (let i = 0; i < this.columns.length; i++) {\n      const renderer = this.renderers[i];\n      const cellContainer = append(rowContainer, $('.monaco-table-td', {\n        'data-col-index': i\n      }));\n      cellContainer.style.width = `${this.getColumnSize(i)}px`;\n      cellContainers.push(cellContainer);\n      cellTemplateData.push(renderer.renderTemplate(cellContainer));\n    }\n\n    const result = {\n      container,\n      cellContainers,\n      cellTemplateData\n    };\n    this.renderedTemplates.add(result);\n    return result;\n  }\n\n  renderElement(element, index, templateData, height) {\n    for (let i = 0; i < this.columns.length; i++) {\n      const column = this.columns[i];\n      const cell = column.project(element);\n      const renderer = this.renderers[i];\n      renderer.renderElement(cell, index, templateData.cellTemplateData[i], height);\n    }\n  }\n\n  disposeElement(element, index, templateData, height) {\n    for (let i = 0; i < this.columns.length; i++) {\n      const renderer = this.renderers[i];\n\n      if (renderer.disposeElement) {\n        const column = this.columns[i];\n        const cell = column.project(element);\n        renderer.disposeElement(cell, index, templateData.cellTemplateData[i], height);\n      }\n    }\n  }\n\n  disposeTemplate(templateData) {\n    for (let i = 0; i < this.columns.length; i++) {\n      const renderer = this.renderers[i];\n      renderer.disposeTemplate(templateData.cellTemplateData[i]);\n    }\n\n    clearNode(templateData.container);\n    this.renderedTemplates.delete(templateData);\n  }\n\n  layoutColumn(index, size) {\n    for (const {\n      cellContainers\n    } of this.renderedTemplates) {\n      cellContainers[index].style.width = `${size}px`;\n    }\n  }\n\n}\n\nTableListRenderer.TemplateId = 'row';\n\nfunction asListVirtualDelegate(delegate) {\n  return {\n    getHeight(row) {\n      return delegate.getHeight(row);\n    },\n\n    getTemplateId() {\n      return TableListRenderer.TemplateId;\n    }\n\n  };\n}\n\nclass ColumnHeader {\n  constructor(column, index) {\n    this.column = column;\n    this.index = index;\n    this._onDidLayout = new Emitter();\n    this.onDidLayout = this._onDidLayout.event;\n    this.element = $('.monaco-table-th', {\n      'data-col-index': index,\n      title: column.tooltip\n    }, column.label);\n  }\n\n  get minimumSize() {\n    var _a;\n\n    return (_a = this.column.minimumWidth) !== null && _a !== void 0 ? _a : 120;\n  }\n\n  get maximumSize() {\n    var _a;\n\n    return (_a = this.column.maximumWidth) !== null && _a !== void 0 ? _a : Number.POSITIVE_INFINITY;\n  }\n\n  get onDidChange() {\n    var _a;\n\n    return (_a = this.column.onDidChangeWidthConstraints) !== null && _a !== void 0 ? _a : Event.None;\n  }\n\n  layout(size) {\n    this._onDidLayout.fire([this.index, size]);\n  }\n\n}\n\nexport class Table {\n  constructor(user, container, virtualDelegate, columns, renderers, _options) {\n    this.virtualDelegate = virtualDelegate;\n    this.domId = `table_id_${++Table.InstanceCount}`;\n    this.cachedHeight = 0;\n    this.domNode = append(container, $(`.monaco-table.${this.domId}`));\n    const headers = columns.map((c, i) => new ColumnHeader(c, i));\n    const descriptor = {\n      size: headers.reduce((a, b) => a + b.column.weight, 0),\n      views: headers.map(view => ({\n        size: view.column.weight,\n        view\n      }))\n    };\n    this.splitview = new SplitView(this.domNode, {\n      orientation: 1\n      /* HORIZONTAL */\n      ,\n      scrollbarVisibility: 2\n      /* Hidden */\n      ,\n      getSashOrthogonalSize: () => this.cachedHeight,\n      descriptor\n    });\n    this.splitview.el.style.height = `${virtualDelegate.headerRowHeight}px`;\n    this.splitview.el.style.lineHeight = `${virtualDelegate.headerRowHeight}px`;\n    const renderer = new TableListRenderer(columns, renderers, i => this.splitview.getViewSize(i));\n    this.list = new List(user, this.domNode, asListVirtualDelegate(virtualDelegate), [renderer], _options);\n    this.columnLayoutDisposable = Event.any(...headers.map(h => h.onDidLayout))(_ref => {\n      let [index, size] = _ref;\n      return renderer.layoutColumn(index, size);\n    });\n    this.styleElement = createStyleSheet(this.domNode);\n    this.style({});\n  }\n\n  get onDidChangeFocus() {\n    return this.list.onDidChangeFocus;\n  }\n\n  get onDidChangeSelection() {\n    return this.list.onDidChangeSelection;\n  }\n\n  get onMouseDblClick() {\n    return this.list.onMouseDblClick;\n  }\n\n  get onPointer() {\n    return this.list.onPointer;\n  }\n\n  get onDidFocus() {\n    return this.list.onDidFocus;\n  }\n\n  get onDidDispose() {\n    return this.list.onDidDispose;\n  }\n\n  updateOptions(options) {\n    this.list.updateOptions(options);\n  }\n\n  splice(start, deleteCount) {\n    let elements = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    this.list.splice(start, deleteCount, elements);\n  }\n\n  getHTMLElement() {\n    return this.domNode;\n  }\n\n  style(styles) {\n    const content = [];\n    content.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight + 1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`);\n    this.styleElement.textContent = content.join('\\n');\n    this.list.style(styles);\n  }\n\n  getSelectedElements() {\n    return this.list.getSelectedElements();\n  }\n\n  getSelection() {\n    return this.list.getSelection();\n  }\n\n  getFocus() {\n    return this.list.getFocus();\n  }\n\n  dispose() {\n    this.splitview.dispose();\n    this.list.dispose();\n    this.columnLayoutDisposable.dispose();\n  }\n\n}\nTable.InstanceCount = 0;","map":{"version":3,"sources":["/home/umut/Documents/cs/cs410/Project2Group14/node_modules/monaco-editor/esm/vs/base/browser/ui/table/tableWidget.js"],"names":["$","append","clearNode","createStyleSheet","List","SplitView","Emitter","Event","TableListRenderer","constructor","columns","renderers","getColumnSize","templateId","TemplateId","renderedTemplates","Set","rendererMap","Map","map","r","column","renderer","get","Error","push","renderTemplate","container","rowContainer","cellContainers","cellTemplateData","i","length","cellContainer","style","width","result","add","renderElement","element","index","templateData","height","cell","project","disposeElement","disposeTemplate","delete","layoutColumn","size","asListVirtualDelegate","delegate","getHeight","row","getTemplateId","ColumnHeader","_onDidLayout","onDidLayout","event","title","tooltip","label","minimumSize","_a","minimumWidth","maximumSize","maximumWidth","Number","POSITIVE_INFINITY","onDidChange","onDidChangeWidthConstraints","None","layout","fire","Table","user","virtualDelegate","_options","domId","InstanceCount","cachedHeight","domNode","headers","c","descriptor","reduce","a","b","weight","views","view","splitview","orientation","scrollbarVisibility","getSashOrthogonalSize","el","headerRowHeight","lineHeight","getViewSize","list","columnLayoutDisposable","any","h","styleElement","onDidChangeFocus","onDidChangeSelection","onMouseDblClick","onPointer","onDidFocus","onDidDispose","updateOptions","options","splice","start","deleteCount","elements","getHTMLElement","styles","content","textContent","join","getSelectedElements","getSelection","getFocus","dispose"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAASA,CAAT,EAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,gBAA/B,QAAuD,cAAvD;AACA,SAASC,IAAT,QAAqB,uBAArB;AACA,SAASC,SAAT,QAA0B,2BAA1B;AACA,SAASC,OAAT,EAAkBC,KAAlB,QAA+B,0BAA/B;AACA,OAAO,aAAP;;AACA,MAAMC,iBAAN,CAAwB;AACpBC,EAAAA,WAAW,CAACC,OAAD,EAAUC,SAAV,EAAqBC,aAArB,EAAoC;AAC3C,SAAKF,OAAL,GAAeA,OAAf;AACA,SAAKE,aAAL,GAAqBA,aAArB;AACA,SAAKC,UAAL,GAAkBL,iBAAiB,CAACM,UAApC;AACA,SAAKC,iBAAL,GAAyB,IAAIC,GAAJ,EAAzB;AACA,UAAMC,WAAW,GAAG,IAAIC,GAAJ,CAAQP,SAAS,CAACQ,GAAV,CAAcC,CAAC,IAAI,CAACA,CAAC,CAACP,UAAH,EAAeO,CAAf,CAAnB,CAAR,CAApB;AACA,SAAKT,SAAL,GAAiB,EAAjB;;AACA,SAAK,MAAMU,MAAX,IAAqBX,OAArB,EAA8B;AAC1B,YAAMY,QAAQ,GAAGL,WAAW,CAACM,GAAZ,CAAgBF,MAAM,CAACR,UAAvB,CAAjB;;AACA,UAAI,CAACS,QAAL,EAAe;AACX,cAAM,IAAIE,KAAJ,CAAW,uCAAsCH,MAAM,CAACR,UAAW,aAAnE,CAAN;AACH;;AACD,WAAKF,SAAL,CAAec,IAAf,CAAoBH,QAApB;AACH;AACJ;;AACDI,EAAAA,cAAc,CAACC,SAAD,EAAY;AACtB,UAAMC,YAAY,GAAG3B,MAAM,CAAC0B,SAAD,EAAY3B,CAAC,CAAC,kBAAD,CAAb,CAA3B;AACA,UAAM6B,cAAc,GAAG,EAAvB;AACA,UAAMC,gBAAgB,GAAG,EAAzB;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrB,OAAL,CAAasB,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC1C,YAAMT,QAAQ,GAAG,KAAKX,SAAL,CAAeoB,CAAf,CAAjB;AACA,YAAME,aAAa,GAAGhC,MAAM,CAAC2B,YAAD,EAAe5B,CAAC,CAAC,kBAAD,EAAqB;AAAE,0BAAkB+B;AAApB,OAArB,CAAhB,CAA5B;AACAE,MAAAA,aAAa,CAACC,KAAd,CAAoBC,KAApB,GAA6B,GAAE,KAAKvB,aAAL,CAAmBmB,CAAnB,CAAsB,IAArD;AACAF,MAAAA,cAAc,CAACJ,IAAf,CAAoBQ,aAApB;AACAH,MAAAA,gBAAgB,CAACL,IAAjB,CAAsBH,QAAQ,CAACI,cAAT,CAAwBO,aAAxB,CAAtB;AACH;;AACD,UAAMG,MAAM,GAAG;AAAET,MAAAA,SAAF;AAAaE,MAAAA,cAAb;AAA6BC,MAAAA;AAA7B,KAAf;AACA,SAAKf,iBAAL,CAAuBsB,GAAvB,CAA2BD,MAA3B;AACA,WAAOA,MAAP;AACH;;AACDE,EAAAA,aAAa,CAACC,OAAD,EAAUC,KAAV,EAAiBC,YAAjB,EAA+BC,MAA/B,EAAuC;AAChD,SAAK,IAAIX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrB,OAAL,CAAasB,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC1C,YAAMV,MAAM,GAAG,KAAKX,OAAL,CAAaqB,CAAb,CAAf;AACA,YAAMY,IAAI,GAAGtB,MAAM,CAACuB,OAAP,CAAeL,OAAf,CAAb;AACA,YAAMjB,QAAQ,GAAG,KAAKX,SAAL,CAAeoB,CAAf,CAAjB;AACAT,MAAAA,QAAQ,CAACgB,aAAT,CAAuBK,IAAvB,EAA6BH,KAA7B,EAAoCC,YAAY,CAACX,gBAAb,CAA8BC,CAA9B,CAApC,EAAsEW,MAAtE;AACH;AACJ;;AACDG,EAAAA,cAAc,CAACN,OAAD,EAAUC,KAAV,EAAiBC,YAAjB,EAA+BC,MAA/B,EAAuC;AACjD,SAAK,IAAIX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrB,OAAL,CAAasB,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC1C,YAAMT,QAAQ,GAAG,KAAKX,SAAL,CAAeoB,CAAf,CAAjB;;AACA,UAAIT,QAAQ,CAACuB,cAAb,EAA6B;AACzB,cAAMxB,MAAM,GAAG,KAAKX,OAAL,CAAaqB,CAAb,CAAf;AACA,cAAMY,IAAI,GAAGtB,MAAM,CAACuB,OAAP,CAAeL,OAAf,CAAb;AACAjB,QAAAA,QAAQ,CAACuB,cAAT,CAAwBF,IAAxB,EAA8BH,KAA9B,EAAqCC,YAAY,CAACX,gBAAb,CAA8BC,CAA9B,CAArC,EAAuEW,MAAvE;AACH;AACJ;AACJ;;AACDI,EAAAA,eAAe,CAACL,YAAD,EAAe;AAC1B,SAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrB,OAAL,CAAasB,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC1C,YAAMT,QAAQ,GAAG,KAAKX,SAAL,CAAeoB,CAAf,CAAjB;AACAT,MAAAA,QAAQ,CAACwB,eAAT,CAAyBL,YAAY,CAACX,gBAAb,CAA8BC,CAA9B,CAAzB;AACH;;AACD7B,IAAAA,SAAS,CAACuC,YAAY,CAACd,SAAd,CAAT;AACA,SAAKZ,iBAAL,CAAuBgC,MAAvB,CAA8BN,YAA9B;AACH;;AACDO,EAAAA,YAAY,CAACR,KAAD,EAAQS,IAAR,EAAc;AACtB,SAAK,MAAM;AAAEpB,MAAAA;AAAF,KAAX,IAAiC,KAAKd,iBAAtC,EAAyD;AACrDc,MAAAA,cAAc,CAACW,KAAD,CAAd,CAAsBN,KAAtB,CAA4BC,KAA5B,GAAqC,GAAEc,IAAK,IAA5C;AACH;AACJ;;AA7DmB;;AA+DxBzC,iBAAiB,CAACM,UAAlB,GAA+B,KAA/B;;AACA,SAASoC,qBAAT,CAA+BC,QAA/B,EAAyC;AACrC,SAAO;AACHC,IAAAA,SAAS,CAACC,GAAD,EAAM;AAAE,aAAOF,QAAQ,CAACC,SAAT,CAAmBC,GAAnB,CAAP;AAAiC,KAD/C;;AAEHC,IAAAA,aAAa,GAAG;AAAE,aAAO9C,iBAAiB,CAACM,UAAzB;AAAsC;;AAFrD,GAAP;AAIH;;AACD,MAAMyC,YAAN,CAAmB;AACf9C,EAAAA,WAAW,CAACY,MAAD,EAASmB,KAAT,EAAgB;AACvB,SAAKnB,MAAL,GAAcA,MAAd;AACA,SAAKmB,KAAL,GAAaA,KAAb;AACA,SAAKgB,YAAL,GAAoB,IAAIlD,OAAJ,EAApB;AACA,SAAKmD,WAAL,GAAmB,KAAKD,YAAL,CAAkBE,KAArC;AACA,SAAKnB,OAAL,GAAevC,CAAC,CAAC,kBAAD,EAAqB;AAAE,wBAAkBwC,KAApB;AAA2BmB,MAAAA,KAAK,EAAEtC,MAAM,CAACuC;AAAzC,KAArB,EAAyEvC,MAAM,CAACwC,KAAhF,CAAhB;AACH;;AACc,MAAXC,WAAW,GAAG;AAAE,QAAIC,EAAJ;;AAAQ,WAAO,CAACA,EAAE,GAAG,KAAK1C,MAAL,CAAY2C,YAAlB,MAAoC,IAApC,IAA4CD,EAAE,KAAK,KAAK,CAAxD,GAA4DA,EAA5D,GAAiE,GAAxE;AAA8E;;AAC3F,MAAXE,WAAW,GAAG;AAAE,QAAIF,EAAJ;;AAAQ,WAAO,CAACA,EAAE,GAAG,KAAK1C,MAAL,CAAY6C,YAAlB,MAAoC,IAApC,IAA4CH,EAAE,KAAK,KAAK,CAAxD,GAA4DA,EAA5D,GAAiEI,MAAM,CAACC,iBAA/E;AAAmG;;AAChH,MAAXC,WAAW,GAAG;AAAE,QAAIN,EAAJ;;AAAQ,WAAO,CAACA,EAAE,GAAG,KAAK1C,MAAL,CAAYiD,2BAAlB,MAAmD,IAAnD,IAA2DP,EAAE,KAAK,KAAK,CAAvE,GAA2EA,EAA3E,GAAgFxD,KAAK,CAACgE,IAA7F;AAAoG;;AAChIC,EAAAA,MAAM,CAACvB,IAAD,EAAO;AACT,SAAKO,YAAL,CAAkBiB,IAAlB,CAAuB,CAAC,KAAKjC,KAAN,EAAaS,IAAb,CAAvB;AACH;;AAbc;;AAenB,OAAO,MAAMyB,KAAN,CAAY;AACfjE,EAAAA,WAAW,CAACkE,IAAD,EAAOhD,SAAP,EAAkBiD,eAAlB,EAAmClE,OAAnC,EAA4CC,SAA5C,EAAuDkE,QAAvD,EAAiE;AACxE,SAAKD,eAAL,GAAuBA,eAAvB;AACA,SAAKE,KAAL,GAAc,YAAW,EAAEJ,KAAK,CAACK,aAAc,EAA/C;AACA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKC,OAAL,GAAehF,MAAM,CAAC0B,SAAD,EAAY3B,CAAC,CAAE,iBAAgB,KAAK8E,KAAM,EAA7B,CAAb,CAArB;AACA,UAAMI,OAAO,GAAGxE,OAAO,CAACS,GAAR,CAAY,CAACgE,CAAD,EAAIpD,CAAJ,KAAU,IAAIwB,YAAJ,CAAiB4B,CAAjB,EAAoBpD,CAApB,CAAtB,CAAhB;AACA,UAAMqD,UAAU,GAAG;AACfnC,MAAAA,IAAI,EAAEiC,OAAO,CAACG,MAAR,CAAe,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAAC,CAAClE,MAAF,CAASmE,MAAtC,EAA8C,CAA9C,CADS;AAEfC,MAAAA,KAAK,EAAEP,OAAO,CAAC/D,GAAR,CAAYuE,IAAI,KAAK;AAAEzC,QAAAA,IAAI,EAAEyC,IAAI,CAACrE,MAAL,CAAYmE,MAApB;AAA4BE,QAAAA;AAA5B,OAAL,CAAhB;AAFQ,KAAnB;AAIA,SAAKC,SAAL,GAAiB,IAAItF,SAAJ,CAAc,KAAK4E,OAAnB,EAA4B;AACzCW,MAAAA,WAAW,EAAE;AAAE;AAD0B;AAEzCC,MAAAA,mBAAmB,EAAE;AAAE;AAFkB;AAGzCC,MAAAA,qBAAqB,EAAE,MAAM,KAAKd,YAHO;AAIzCI,MAAAA;AAJyC,KAA5B,CAAjB;AAMA,SAAKO,SAAL,CAAeI,EAAf,CAAkB7D,KAAlB,CAAwBQ,MAAxB,GAAkC,GAAEkC,eAAe,CAACoB,eAAgB,IAApE;AACA,SAAKL,SAAL,CAAeI,EAAf,CAAkB7D,KAAlB,CAAwB+D,UAAxB,GAAsC,GAAErB,eAAe,CAACoB,eAAgB,IAAxE;AACA,UAAM1E,QAAQ,GAAG,IAAId,iBAAJ,CAAsBE,OAAtB,EAA+BC,SAA/B,EAA0CoB,CAAC,IAAI,KAAK4D,SAAL,CAAeO,WAAf,CAA2BnE,CAA3B,CAA/C,CAAjB;AACA,SAAKoE,IAAL,GAAY,IAAI/F,IAAJ,CAASuE,IAAT,EAAe,KAAKM,OAApB,EAA6B/B,qBAAqB,CAAC0B,eAAD,CAAlD,EAAqE,CAACtD,QAAD,CAArE,EAAiFuD,QAAjF,CAAZ;AACA,SAAKuB,sBAAL,GAA8B7F,KAAK,CAAC8F,GAAN,CAAU,GAAGnB,OAAO,CAAC/D,GAAR,CAAYmF,CAAC,IAAIA,CAAC,CAAC7C,WAAnB,CAAb,EAA8C;AAAA,UAAC,CAACjB,KAAD,EAAQS,IAAR,CAAD;AAAA,aAAmB3B,QAAQ,CAAC0B,YAAT,CAAsBR,KAAtB,EAA6BS,IAA7B,CAAnB;AAAA,KAA9C,CAA9B;AACA,SAAKsD,YAAL,GAAoBpG,gBAAgB,CAAC,KAAK8E,OAAN,CAApC;AACA,SAAK/C,KAAL,CAAW,EAAX;AACH;;AACmB,MAAhBsE,gBAAgB,GAAG;AAAE,WAAO,KAAKL,IAAL,CAAUK,gBAAjB;AAAoC;;AACrC,MAApBC,oBAAoB,GAAG;AAAE,WAAO,KAAKN,IAAL,CAAUM,oBAAjB;AAAwC;;AAClD,MAAfC,eAAe,GAAG;AAAE,WAAO,KAAKP,IAAL,CAAUO,eAAjB;AAAmC;;AAC9C,MAATC,SAAS,GAAG;AAAE,WAAO,KAAKR,IAAL,CAAUQ,SAAjB;AAA6B;;AACjC,MAAVC,UAAU,GAAG;AAAE,WAAO,KAAKT,IAAL,CAAUS,UAAjB;AAA8B;;AACjC,MAAZC,YAAY,GAAG;AAAE,WAAO,KAAKV,IAAL,CAAUU,YAAjB;AAAgC;;AACrDC,EAAAA,aAAa,CAACC,OAAD,EAAU;AACnB,SAAKZ,IAAL,CAAUW,aAAV,CAAwBC,OAAxB;AACH;;AACDC,EAAAA,MAAM,CAACC,KAAD,EAAQC,WAAR,EAAoC;AAAA,QAAfC,QAAe,uEAAJ,EAAI;AACtC,SAAKhB,IAAL,CAAUa,MAAV,CAAiBC,KAAjB,EAAwBC,WAAxB,EAAqCC,QAArC;AACH;;AACDC,EAAAA,cAAc,GAAG;AACb,WAAO,KAAKnC,OAAZ;AACH;;AACD/C,EAAAA,KAAK,CAACmF,MAAD,EAAS;AACV,UAAMC,OAAO,GAAG,EAAhB;AACAA,IAAAA,OAAO,CAAC7F,IAAR,CAAc,iBAAgB,KAAKqD,KAAM;AACjD,UAAU,KAAKF,eAAL,CAAqBoB,eAArB,GAAuC,CAAE;AACnD,yBAAyB,KAAKpB,eAAL,CAAqBoB,eAAgB;AAC9D,IAHQ;AAIA,SAAKO,YAAL,CAAkBgB,WAAlB,GAAgCD,OAAO,CAACE,IAAR,CAAa,IAAb,CAAhC;AACA,SAAKrB,IAAL,CAAUjE,KAAV,CAAgBmF,MAAhB;AACH;;AACDI,EAAAA,mBAAmB,GAAG;AAClB,WAAO,KAAKtB,IAAL,CAAUsB,mBAAV,EAAP;AACH;;AACDC,EAAAA,YAAY,GAAG;AACX,WAAO,KAAKvB,IAAL,CAAUuB,YAAV,EAAP;AACH;;AACDC,EAAAA,QAAQ,GAAG;AACP,WAAO,KAAKxB,IAAL,CAAUwB,QAAV,EAAP;AACH;;AACDC,EAAAA,OAAO,GAAG;AACN,SAAKjC,SAAL,CAAeiC,OAAf;AACA,SAAKzB,IAAL,CAAUyB,OAAV;AACA,SAAKxB,sBAAL,CAA4BwB,OAA5B;AACH;;AA9Dc;AAgEnBlD,KAAK,CAACK,aAAN,GAAsB,CAAtB","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append, clearNode, createStyleSheet } from '../../dom.js';\nimport { List } from '../list/listWidget.js';\nimport { SplitView } from '../splitview/splitview.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport './table.css';\nclass TableListRenderer {\n    constructor(columns, renderers, getColumnSize) {\n        this.columns = columns;\n        this.getColumnSize = getColumnSize;\n        this.templateId = TableListRenderer.TemplateId;\n        this.renderedTemplates = new Set();\n        const rendererMap = new Map(renderers.map(r => [r.templateId, r]));\n        this.renderers = [];\n        for (const column of columns) {\n            const renderer = rendererMap.get(column.templateId);\n            if (!renderer) {\n                throw new Error(`Table cell renderer for template id ${column.templateId} not found.`);\n            }\n            this.renderers.push(renderer);\n        }\n    }\n    renderTemplate(container) {\n        const rowContainer = append(container, $('.monaco-table-tr'));\n        const cellContainers = [];\n        const cellTemplateData = [];\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            const cellContainer = append(rowContainer, $('.monaco-table-td', { 'data-col-index': i }));\n            cellContainer.style.width = `${this.getColumnSize(i)}px`;\n            cellContainers.push(cellContainer);\n            cellTemplateData.push(renderer.renderTemplate(cellContainer));\n        }\n        const result = { container, cellContainers, cellTemplateData };\n        this.renderedTemplates.add(result);\n        return result;\n    }\n    renderElement(element, index, templateData, height) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const column = this.columns[i];\n            const cell = column.project(element);\n            const renderer = this.renderers[i];\n            renderer.renderElement(cell, index, templateData.cellTemplateData[i], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            if (renderer.disposeElement) {\n                const column = this.columns[i];\n                const cell = column.project(element);\n                renderer.disposeElement(cell, index, templateData.cellTemplateData[i], height);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            renderer.disposeTemplate(templateData.cellTemplateData[i]);\n        }\n        clearNode(templateData.container);\n        this.renderedTemplates.delete(templateData);\n    }\n    layoutColumn(index, size) {\n        for (const { cellContainers } of this.renderedTemplates) {\n            cellContainers[index].style.width = `${size}px`;\n        }\n    }\n}\nTableListRenderer.TemplateId = 'row';\nfunction asListVirtualDelegate(delegate) {\n    return {\n        getHeight(row) { return delegate.getHeight(row); },\n        getTemplateId() { return TableListRenderer.TemplateId; },\n    };\n}\nclass ColumnHeader {\n    constructor(column, index) {\n        this.column = column;\n        this.index = index;\n        this._onDidLayout = new Emitter();\n        this.onDidLayout = this._onDidLayout.event;\n        this.element = $('.monaco-table-th', { 'data-col-index': index, title: column.tooltip }, column.label);\n    }\n    get minimumSize() { var _a; return (_a = this.column.minimumWidth) !== null && _a !== void 0 ? _a : 120; }\n    get maximumSize() { var _a; return (_a = this.column.maximumWidth) !== null && _a !== void 0 ? _a : Number.POSITIVE_INFINITY; }\n    get onDidChange() { var _a; return (_a = this.column.onDidChangeWidthConstraints) !== null && _a !== void 0 ? _a : Event.None; }\n    layout(size) {\n        this._onDidLayout.fire([this.index, size]);\n    }\n}\nexport class Table {\n    constructor(user, container, virtualDelegate, columns, renderers, _options) {\n        this.virtualDelegate = virtualDelegate;\n        this.domId = `table_id_${++Table.InstanceCount}`;\n        this.cachedHeight = 0;\n        this.domNode = append(container, $(`.monaco-table.${this.domId}`));\n        const headers = columns.map((c, i) => new ColumnHeader(c, i));\n        const descriptor = {\n            size: headers.reduce((a, b) => a + b.column.weight, 0),\n            views: headers.map(view => ({ size: view.column.weight, view }))\n        };\n        this.splitview = new SplitView(this.domNode, {\n            orientation: 1 /* HORIZONTAL */,\n            scrollbarVisibility: 2 /* Hidden */,\n            getSashOrthogonalSize: () => this.cachedHeight,\n            descriptor\n        });\n        this.splitview.el.style.height = `${virtualDelegate.headerRowHeight}px`;\n        this.splitview.el.style.lineHeight = `${virtualDelegate.headerRowHeight}px`;\n        const renderer = new TableListRenderer(columns, renderers, i => this.splitview.getViewSize(i));\n        this.list = new List(user, this.domNode, asListVirtualDelegate(virtualDelegate), [renderer], _options);\n        this.columnLayoutDisposable = Event.any(...headers.map(h => h.onDidLayout))(([index, size]) => renderer.layoutColumn(index, size));\n        this.styleElement = createStyleSheet(this.domNode);\n        this.style({});\n    }\n    get onDidChangeFocus() { return this.list.onDidChangeFocus; }\n    get onDidChangeSelection() { return this.list.onDidChangeSelection; }\n    get onMouseDblClick() { return this.list.onMouseDblClick; }\n    get onPointer() { return this.list.onPointer; }\n    get onDidFocus() { return this.list.onDidFocus; }\n    get onDidDispose() { return this.list.onDidDispose; }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    splice(start, deleteCount, elements = []) {\n        this.list.splice(start, deleteCount, elements);\n    }\n    getHTMLElement() {\n        return this.domNode;\n    }\n    style(styles) {\n        const content = [];\n        content.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight + 1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`);\n        this.styleElement.textContent = content.join('\\n');\n        this.list.style(styles);\n    }\n    getSelectedElements() {\n        return this.list.getSelectedElements();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    dispose() {\n        this.splitview.dispose();\n        this.list.dispose();\n        this.columnLayoutDisposable.dispose();\n    }\n}\nTable.InstanceCount = 0;\n"]},"metadata":{},"sourceType":"module"}