{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport './inspectTokens.css';\nimport { $, append, reset } from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TokenMetadata, TokenizationRegistry } from '../../../common/modes.js';\nimport { NULL_STATE, nullTokenize, nullTokenize2 } from '../../../common/modes/nullMode.js';\nimport { IModeService } from '../../../common/services/modeService.js';\nimport { IStandaloneThemeService } from '../../common/standaloneThemeService.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\nimport { ColorScheme } from '../../../../platform/theme/common/theme.js';\nlet InspectTokensController = class InspectTokensController extends Disposable {\n  constructor(editor, standaloneColorService, modeService) {\n    super();\n    this._editor = editor;\n    this._modeService = modeService;\n    this._widget = null;\n\n    this._register(this._editor.onDidChangeModel(e => this.stop()));\n\n    this._register(this._editor.onDidChangeModelLanguage(e => this.stop()));\n\n    this._register(TokenizationRegistry.onDidChange(e => this.stop()));\n\n    this._register(this._editor.onKeyUp(e => e.keyCode === 9\n    /* Escape */\n    && this.stop()));\n  }\n\n  static get(editor) {\n    return editor.getContribution(InspectTokensController.ID);\n  }\n\n  dispose() {\n    this.stop();\n    super.dispose();\n  }\n\n  launch() {\n    if (this._widget) {\n      return;\n    }\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    this._widget = new InspectTokensWidget(this._editor, this._modeService);\n  }\n\n  stop() {\n    if (this._widget) {\n      this._widget.dispose();\n\n      this._widget = null;\n    }\n  }\n\n};\nInspectTokensController.ID = 'editor.contrib.inspectTokens';\nInspectTokensController = __decorate([__param(1, IStandaloneThemeService), __param(2, IModeService)], InspectTokensController);\n\nclass InspectTokens extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.inspectTokens',\n      label: InspectTokensNLS.inspectTokensAction,\n      alias: 'Developer: Inspect Tokens',\n      precondition: undefined\n    });\n  }\n\n  run(accessor, editor) {\n    let controller = InspectTokensController.get(editor);\n\n    if (controller) {\n      controller.launch();\n    }\n  }\n\n}\n\nfunction renderTokenText(tokenText) {\n  let result = '';\n\n  for (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n    let charCode = tokenText.charCodeAt(charIndex);\n\n    switch (charCode) {\n      case 9\n      /* Tab */\n      :\n        result += '\\u2192'; // &rarr;\n\n        break;\n\n      case 32\n      /* Space */\n      :\n        result += '\\u00B7'; // &middot;\n\n        break;\n\n      default:\n        result += String.fromCharCode(charCode);\n    }\n  }\n\n  return result;\n}\n\nfunction getSafeTokenizationSupport(languageIdCodec, languageId) {\n  const tokenizationSupport = TokenizationRegistry.get(languageId);\n\n  if (tokenizationSupport) {\n    return tokenizationSupport;\n  }\n\n  const encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n  return {\n    getInitialState: () => NULL_STATE,\n    tokenize: (line, hasEOL, state, deltaOffset) => nullTokenize(languageId, line, state, deltaOffset),\n    tokenize2: (line, hasEOL, state, deltaOffset) => nullTokenize2(encodedLanguageId, line, state, deltaOffset)\n  };\n}\n\nclass InspectTokensWidget extends Disposable {\n  constructor(editor, modeService) {\n    super(); // Editor.IContentWidget.allowEditorOverflow\n\n    this.allowEditorOverflow = true;\n    this._editor = editor;\n    this._modeService = modeService;\n    this._model = this._editor.getModel();\n    this._domNode = document.createElement('div');\n    this._domNode.className = 'tokens-inspect-widget';\n    this._tokenizationSupport = getSafeTokenizationSupport(this._modeService.languageIdCodec, this._model.getLanguageId());\n\n    this._compute(this._editor.getPosition());\n\n    this._register(this._editor.onDidChangeCursorPosition(e => this._compute(this._editor.getPosition())));\n\n    this._editor.addContentWidget(this);\n  }\n\n  dispose() {\n    this._editor.removeContentWidget(this);\n\n    super.dispose();\n  }\n\n  getId() {\n    return InspectTokensWidget._ID;\n  }\n\n  _compute(position) {\n    let data = this._getTokensAtLine(position.lineNumber);\n\n    let token1Index = 0;\n\n    for (let i = data.tokens1.length - 1; i >= 0; i--) {\n      let t = data.tokens1[i];\n\n      if (position.column - 1 >= t.offset) {\n        token1Index = i;\n        break;\n      }\n    }\n\n    let token2Index = 0;\n\n    for (let i = data.tokens2.length >>> 1; i >= 0; i--) {\n      if (position.column - 1 >= data.tokens2[i << 1]) {\n        token2Index = i;\n        break;\n      }\n    }\n\n    let lineContent = this._model.getLineContent(position.lineNumber);\n\n    let tokenText = '';\n\n    if (token1Index < data.tokens1.length) {\n      let tokenStartIndex = data.tokens1[token1Index].offset;\n      let tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\n      tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\n    }\n\n    reset(this._domNode, $('h2.tm-token', undefined, renderTokenText(tokenText), $('span.tm-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\n    append(this._domNode, $('hr.tokens-inspect-separator', {\n      'style': 'clear:both'\n    }));\n    const metadata = (token2Index << 1) + 1 < data.tokens2.length ? this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]) : null;\n    append(this._domNode, $('table.tm-metadata-table', undefined, $('tbody', undefined, $('tr', undefined, $('td.tm-metadata-key', undefined, 'language'), $('td.tm-metadata-value', undefined, `${metadata ? metadata.languageId : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'token type'), $('td.tm-metadata-value', undefined, `${metadata ? this._tokenTypeToString(metadata.tokenType) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'font style'), $('td.tm-metadata-value', undefined, `${metadata ? this._fontStyleToString(metadata.fontStyle) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'foreground'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.foreground) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'background'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.background) : '-?-'}`)))));\n    append(this._domNode, $('hr.tokens-inspect-separator'));\n\n    if (token1Index < data.tokens1.length) {\n      append(this._domNode, $('span.tm-token-type', undefined, data.tokens1[token1Index].type));\n    }\n\n    this._editor.layoutContentWidget(this);\n  }\n\n  _decodeMetadata(metadata) {\n    let colorMap = TokenizationRegistry.getColorMap();\n    let languageId = TokenMetadata.getLanguageId(metadata);\n    let tokenType = TokenMetadata.getTokenType(metadata);\n    let fontStyle = TokenMetadata.getFontStyle(metadata);\n    let foreground = TokenMetadata.getForeground(metadata);\n    let background = TokenMetadata.getBackground(metadata);\n    return {\n      languageId: this._modeService.languageIdCodec.decodeLanguageId(languageId),\n      tokenType: tokenType,\n      fontStyle: fontStyle,\n      foreground: colorMap[foreground],\n      background: colorMap[background]\n    };\n  }\n\n  _tokenTypeToString(tokenType) {\n    switch (tokenType) {\n      case 0\n      /* Other */\n      :\n        return 'Other';\n\n      case 1\n      /* Comment */\n      :\n        return 'Comment';\n\n      case 2\n      /* String */\n      :\n        return 'String';\n\n      case 4\n      /* RegEx */\n      :\n        return 'RegEx';\n\n      default:\n        return '??';\n    }\n  }\n\n  _fontStyleToString(fontStyle) {\n    let r = '';\n\n    if (fontStyle & 1\n    /* Italic */\n    ) {\n      r += 'italic ';\n    }\n\n    if (fontStyle & 2\n    /* Bold */\n    ) {\n      r += 'bold ';\n    }\n\n    if (fontStyle & 4\n    /* Underline */\n    ) {\n      r += 'underline ';\n    }\n\n    if (r.length === 0) {\n      r = '---';\n    }\n\n    return r;\n  }\n\n  _getTokensAtLine(lineNumber) {\n    let stateBeforeLine = this._getStateBeforeLine(lineNumber);\n\n    let tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), true, stateBeforeLine, 0);\n\n    let tokenizationResult2 = this._tokenizationSupport.tokenize2(this._model.getLineContent(lineNumber), true, stateBeforeLine, 0);\n\n    return {\n      startState: stateBeforeLine,\n      tokens1: tokenizationResult1.tokens,\n      tokens2: tokenizationResult2.tokens,\n      endState: tokenizationResult1.endState\n    };\n  }\n\n  _getStateBeforeLine(lineNumber) {\n    let state = this._tokenizationSupport.getInitialState();\n\n    for (let i = 1; i < lineNumber; i++) {\n      let tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), true, state, 0);\n\n      state = tokenizationResult.endState;\n    }\n\n    return state;\n  }\n\n  getDomNode() {\n    return this._domNode;\n  }\n\n  getPosition() {\n    return {\n      position: this._editor.getPosition(),\n      preference: [2\n      /* BELOW */\n      , 1\n      /* ABOVE */\n      ]\n    };\n  }\n\n}\n\nInspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController);\nregisterEditorAction(InspectTokens);\nregisterThemingParticipant((theme, collector) => {\n  const border = theme.getColor(editorHoverBorder);\n\n  if (border) {\n    let borderWidth = theme.type === ColorScheme.HIGH_CONTRAST ? 2 : 1;\n    collector.addRule(`.monaco-editor .tokens-inspect-widget { border: ${borderWidth}px solid ${border}; }`);\n    collector.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${border}; }`);\n  }\n\n  const background = theme.getColor(editorHoverBackground);\n\n  if (background) {\n    collector.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${background}; }`);\n  }\n\n  const foreground = theme.getColor(editorHoverForeground);\n\n  if (foreground) {\n    collector.addRule(`.monaco-editor .tokens-inspect-widget { color: ${foreground}; }`);\n  }\n});","map":{"version":3,"sources":["/home/umut/Documents/cs/cs410/Project2Group14/node_modules/monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","$","append","reset","Color","Disposable","EditorAction","registerEditorAction","registerEditorContribution","TokenMetadata","TokenizationRegistry","NULL_STATE","nullTokenize","nullTokenize2","IModeService","IStandaloneThemeService","editorHoverBackground","editorHoverBorder","editorHoverForeground","registerThemingParticipant","InspectTokensNLS","ColorScheme","InspectTokensController","constructor","editor","standaloneColorService","modeService","_editor","_modeService","_widget","_register","onDidChangeModel","e","stop","onDidChangeModelLanguage","onDidChange","onKeyUp","keyCode","get","getContribution","ID","dispose","launch","hasModel","InspectTokensWidget","InspectTokens","id","label","inspectTokensAction","alias","precondition","undefined","run","accessor","controller","renderTokenText","tokenText","result","charIndex","len","charCode","charCodeAt","String","fromCharCode","getSafeTokenizationSupport","languageIdCodec","languageId","tokenizationSupport","encodedLanguageId","encodeLanguageId","getInitialState","tokenize","line","hasEOL","state","deltaOffset","tokenize2","allowEditorOverflow","_model","getModel","_domNode","document","createElement","className","_tokenizationSupport","getLanguageId","_compute","getPosition","onDidChangeCursorPosition","addContentWidget","removeContentWidget","getId","_ID","position","data","_getTokensAtLine","lineNumber","token1Index","tokens1","t","column","offset","token2Index","tokens2","lineContent","getLineContent","tokenStartIndex","tokenEndIndex","substring","metadata","_decodeMetadata","_tokenTypeToString","tokenType","_fontStyleToString","fontStyle","Format","CSS","formatHex","foreground","background","type","layoutContentWidget","colorMap","getColorMap","getTokenType","getFontStyle","getForeground","getBackground","decodeLanguageId","stateBeforeLine","_getStateBeforeLine","tokenizationResult1","tokenizationResult2","startState","tokens","endState","tokenizationResult","getDomNode","preference","theme","collector","border","getColor","borderWidth","HIGH_CONTRAST","addRule"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './inspectTokens.css';\nimport { $, append, reset } from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TokenMetadata, TokenizationRegistry } from '../../../common/modes.js';\nimport { NULL_STATE, nullTokenize, nullTokenize2 } from '../../../common/modes/nullMode.js';\nimport { IModeService } from '../../../common/services/modeService.js';\nimport { IStandaloneThemeService } from '../../common/standaloneThemeService.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\nimport { ColorScheme } from '../../../../platform/theme/common/theme.js';\nlet InspectTokensController = class InspectTokensController extends Disposable {\n    constructor(editor, standaloneColorService, modeService) {\n        super();\n        this._editor = editor;\n        this._modeService = modeService;\n        this._widget = null;\n        this._register(this._editor.onDidChangeModel((e) => this.stop()));\n        this._register(this._editor.onDidChangeModelLanguage((e) => this.stop()));\n        this._register(TokenizationRegistry.onDidChange((e) => this.stop()));\n        this._register(this._editor.onKeyUp((e) => e.keyCode === 9 /* Escape */ && this.stop()));\n    }\n    static get(editor) {\n        return editor.getContribution(InspectTokensController.ID);\n    }\n    dispose() {\n        this.stop();\n        super.dispose();\n    }\n    launch() {\n        if (this._widget) {\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._widget = new InspectTokensWidget(this._editor, this._modeService);\n    }\n    stop() {\n        if (this._widget) {\n            this._widget.dispose();\n            this._widget = null;\n        }\n    }\n};\nInspectTokensController.ID = 'editor.contrib.inspectTokens';\nInspectTokensController = __decorate([\n    __param(1, IStandaloneThemeService),\n    __param(2, IModeService)\n], InspectTokensController);\nclass InspectTokens extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inspectTokens',\n            label: InspectTokensNLS.inspectTokensAction,\n            alias: 'Developer: Inspect Tokens',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        let controller = InspectTokensController.get(editor);\n        if (controller) {\n            controller.launch();\n        }\n    }\n}\nfunction renderTokenText(tokenText) {\n    let result = '';\n    for (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n        let charCode = tokenText.charCodeAt(charIndex);\n        switch (charCode) {\n            case 9 /* Tab */:\n                result += '\\u2192'; // &rarr;\n                break;\n            case 32 /* Space */:\n                result += '\\u00B7'; // &middot;\n                break;\n            default:\n                result += String.fromCharCode(charCode);\n        }\n    }\n    return result;\n}\nfunction getSafeTokenizationSupport(languageIdCodec, languageId) {\n    const tokenizationSupport = TokenizationRegistry.get(languageId);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    const encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n    return {\n        getInitialState: () => NULL_STATE,\n        tokenize: (line, hasEOL, state, deltaOffset) => nullTokenize(languageId, line, state, deltaOffset),\n        tokenize2: (line, hasEOL, state, deltaOffset) => nullTokenize2(encodedLanguageId, line, state, deltaOffset)\n    };\n}\nclass InspectTokensWidget extends Disposable {\n    constructor(editor, modeService) {\n        super();\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this._editor = editor;\n        this._modeService = modeService;\n        this._model = this._editor.getModel();\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'tokens-inspect-widget';\n        this._tokenizationSupport = getSafeTokenizationSupport(this._modeService.languageIdCodec, this._model.getLanguageId());\n        this._compute(this._editor.getPosition());\n        this._register(this._editor.onDidChangeCursorPosition((e) => this._compute(this._editor.getPosition())));\n        this._editor.addContentWidget(this);\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return InspectTokensWidget._ID;\n    }\n    _compute(position) {\n        let data = this._getTokensAtLine(position.lineNumber);\n        let token1Index = 0;\n        for (let i = data.tokens1.length - 1; i >= 0; i--) {\n            let t = data.tokens1[i];\n            if (position.column - 1 >= t.offset) {\n                token1Index = i;\n                break;\n            }\n        }\n        let token2Index = 0;\n        for (let i = (data.tokens2.length >>> 1); i >= 0; i--) {\n            if (position.column - 1 >= data.tokens2[(i << 1)]) {\n                token2Index = i;\n                break;\n            }\n        }\n        let lineContent = this._model.getLineContent(position.lineNumber);\n        let tokenText = '';\n        if (token1Index < data.tokens1.length) {\n            let tokenStartIndex = data.tokens1[token1Index].offset;\n            let tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\n            tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\n        }\n        reset(this._domNode, $('h2.tm-token', undefined, renderTokenText(tokenText), $('span.tm-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\n        append(this._domNode, $('hr.tokens-inspect-separator', { 'style': 'clear:both' }));\n        const metadata = (token2Index << 1) + 1 < data.tokens2.length ? this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]) : null;\n        append(this._domNode, $('table.tm-metadata-table', undefined, $('tbody', undefined, $('tr', undefined, $('td.tm-metadata-key', undefined, 'language'), $('td.tm-metadata-value', undefined, `${metadata ? metadata.languageId : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'token type'), $('td.tm-metadata-value', undefined, `${metadata ? this._tokenTypeToString(metadata.tokenType) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'font style'), $('td.tm-metadata-value', undefined, `${metadata ? this._fontStyleToString(metadata.fontStyle) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'foreground'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.foreground) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'background'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.background) : '-?-'}`)))));\n        append(this._domNode, $('hr.tokens-inspect-separator'));\n        if (token1Index < data.tokens1.length) {\n            append(this._domNode, $('span.tm-token-type', undefined, data.tokens1[token1Index].type));\n        }\n        this._editor.layoutContentWidget(this);\n    }\n    _decodeMetadata(metadata) {\n        let colorMap = TokenizationRegistry.getColorMap();\n        let languageId = TokenMetadata.getLanguageId(metadata);\n        let tokenType = TokenMetadata.getTokenType(metadata);\n        let fontStyle = TokenMetadata.getFontStyle(metadata);\n        let foreground = TokenMetadata.getForeground(metadata);\n        let background = TokenMetadata.getBackground(metadata);\n        return {\n            languageId: this._modeService.languageIdCodec.decodeLanguageId(languageId),\n            tokenType: tokenType,\n            fontStyle: fontStyle,\n            foreground: colorMap[foreground],\n            background: colorMap[background]\n        };\n    }\n    _tokenTypeToString(tokenType) {\n        switch (tokenType) {\n            case 0 /* Other */: return 'Other';\n            case 1 /* Comment */: return 'Comment';\n            case 2 /* String */: return 'String';\n            case 4 /* RegEx */: return 'RegEx';\n            default: return '??';\n        }\n    }\n    _fontStyleToString(fontStyle) {\n        let r = '';\n        if (fontStyle & 1 /* Italic */) {\n            r += 'italic ';\n        }\n        if (fontStyle & 2 /* Bold */) {\n            r += 'bold ';\n        }\n        if (fontStyle & 4 /* Underline */) {\n            r += 'underline ';\n        }\n        if (r.length === 0) {\n            r = '---';\n        }\n        return r;\n    }\n    _getTokensAtLine(lineNumber) {\n        let stateBeforeLine = this._getStateBeforeLine(lineNumber);\n        let tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), true, stateBeforeLine, 0);\n        let tokenizationResult2 = this._tokenizationSupport.tokenize2(this._model.getLineContent(lineNumber), true, stateBeforeLine, 0);\n        return {\n            startState: stateBeforeLine,\n            tokens1: tokenizationResult1.tokens,\n            tokens2: tokenizationResult2.tokens,\n            endState: tokenizationResult1.endState\n        };\n    }\n    _getStateBeforeLine(lineNumber) {\n        let state = this._tokenizationSupport.getInitialState();\n        for (let i = 1; i < lineNumber; i++) {\n            let tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), true, state, 0);\n            state = tokenizationResult.endState;\n        }\n        return state;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._editor.getPosition(),\n            preference: [2 /* BELOW */, 1 /* ABOVE */]\n        };\n    }\n}\nInspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController);\nregisterEditorAction(InspectTokens);\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorHoverBorder);\n    if (border) {\n        let borderWidth = theme.type === ColorScheme.HIGH_CONTRAST ? 2 : 1;\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { border: ${borderWidth}px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${border}; }`);\n    }\n    const background = theme.getColor(editorHoverBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${background}; }`);\n    }\n    const foreground = theme.getColor(editorHoverForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { color: ${foreground}; }`);\n    }\n});\n"]},"metadata":{},"sourceType":"module"}