{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as dom from '../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { createCancelablePromise, disposableTimeout } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { Range } from '../../common/core/range.js';\nimport { IMarkerDecorationsService } from '../../common/services/markersDecorationService.js';\nimport { getCodeActions } from '../codeAction/codeAction.js';\nimport { QuickFixAction, QuickFixController } from '../codeAction/codeActionCommands.js';\nimport { CodeActionKind } from '../codeAction/types.js';\nimport { MarkerController, NextMarkerAction } from '../gotoError/gotoError.js';\nimport * as nls from '../../../nls.js';\nimport { IMarkerData, MarkerSeverity } from '../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { Progress } from '../../../platform/progress/common/progress.js';\nimport { textLinkActiveForeground, textLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nexport class MarkerHover {\n  constructor(owner, range, marker) {\n    this.owner = owner;\n    this.range = range;\n    this.marker = marker;\n  }\n\n  isValidForHoverAnchor(anchor) {\n    return anchor.type === 1\n    /* Range */\n    && this.range.startColumn <= anchor.range.startColumn && this.range.endColumn >= anchor.range.endColumn;\n  }\n\n}\nconst markerCodeActionTrigger = {\n  type: 1\n  /* Invoke */\n  ,\n  filter: {\n    include: CodeActionKind.QuickFix\n  }\n};\nlet MarkerHoverParticipant = class MarkerHoverParticipant {\n  constructor(_editor, _hover, _markerDecorationsService, _openerService) {\n    this._editor = _editor;\n    this._hover = _hover;\n    this._markerDecorationsService = _markerDecorationsService;\n    this._openerService = _openerService;\n    this.recentMarkerCodeActionsInfo = undefined;\n  }\n\n  computeSync(anchor, lineDecorations) {\n    if (!this._editor.hasModel() || anchor.type !== 1\n    /* Range */\n    ) {\n      return [];\n    }\n\n    const model = this._editor.getModel();\n\n    const lineNumber = anchor.range.startLineNumber;\n    const maxColumn = model.getLineMaxColumn(lineNumber);\n    const result = [];\n\n    for (const d of lineDecorations) {\n      const startColumn = d.range.startLineNumber === lineNumber ? d.range.startColumn : 1;\n      const endColumn = d.range.endLineNumber === lineNumber ? d.range.endColumn : maxColumn;\n\n      const marker = this._markerDecorationsService.getMarker(model.uri, d);\n\n      if (!marker) {\n        continue;\n      }\n\n      const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n      result.push(new MarkerHover(this, range, marker));\n    }\n\n    return result;\n  }\n\n  renderHoverParts(hoverParts, fragment, statusBar) {\n    if (!hoverParts.length) {\n      return Disposable.None;\n    }\n\n    const disposables = new DisposableStore();\n    hoverParts.forEach(msg => fragment.appendChild(this.renderMarkerHover(msg, disposables)));\n    const markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n    this.renderMarkerStatusbar(markerHoverForStatusbar, statusBar, disposables);\n    return disposables;\n  }\n\n  renderMarkerHover(markerHover, disposables) {\n    const hoverElement = $('div.hover-row');\n    const markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n    const {\n      source,\n      message,\n      code,\n      relatedInformation\n    } = markerHover.marker;\n\n    this._editor.applyFontInfo(markerElement);\n\n    const messageElement = dom.append(markerElement, $('span'));\n    messageElement.style.whiteSpace = 'pre-wrap';\n    messageElement.innerText = message;\n\n    if (source || code) {\n      // Code has link\n      if (code && typeof code !== 'string') {\n        const sourceAndCodeElement = $('span');\n\n        if (source) {\n          const sourceElement = dom.append(sourceAndCodeElement, $('span'));\n          sourceElement.innerText = source;\n        }\n\n        const codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n        codeLink.setAttribute('href', code.target.toString());\n        disposables.add(dom.addDisposableListener(codeLink, 'click', e => {\n          this._openerService.open(code.target, {\n            allowCommands: true\n          });\n\n          e.preventDefault();\n          e.stopPropagation();\n        }));\n        const codeElement = dom.append(codeLink, $('span'));\n        codeElement.innerText = code.value;\n        const detailsElement = dom.append(markerElement, sourceAndCodeElement);\n        detailsElement.style.opacity = '0.6';\n        detailsElement.style.paddingLeft = '6px';\n      } else {\n        const detailsElement = dom.append(markerElement, $('span'));\n        detailsElement.style.opacity = '0.6';\n        detailsElement.style.paddingLeft = '6px';\n        detailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n      }\n    }\n\n    if (isNonEmptyArray(relatedInformation)) {\n      for (const {\n        message,\n        resource,\n        startLineNumber,\n        startColumn\n      } of relatedInformation) {\n        const relatedInfoContainer = dom.append(markerElement, $('div'));\n        relatedInfoContainer.style.marginTop = '8px';\n        const a = dom.append(relatedInfoContainer, $('a'));\n        a.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n        a.style.cursor = 'pointer';\n        disposables.add(dom.addDisposableListener(a, 'click', e => {\n          e.stopPropagation();\n          e.preventDefault();\n\n          if (this._openerService) {\n            this._openerService.open(resource, {\n              fromUserGesture: true,\n              editorOptions: {\n                selection: {\n                  startLineNumber,\n                  startColumn\n                }\n              }\n            }).catch(onUnexpectedError);\n          }\n        }));\n        const messageElement = dom.append(relatedInfoContainer, $('span'));\n        messageElement.innerText = message;\n\n        this._editor.applyFontInfo(messageElement);\n      }\n    }\n\n    return hoverElement;\n  }\n\n  renderMarkerStatusbar(markerHover, statusBar, disposables) {\n    if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n      statusBar.addAction({\n        label: nls.localize('view problem', \"View Problem\"),\n        commandId: NextMarkerAction.ID,\n        run: () => {\n          this._hover.hide();\n\n          MarkerController.get(this._editor).showAtMarker(markerHover.marker);\n\n          this._editor.focus();\n        }\n      });\n    }\n\n    if (!this._editor.getOption(80\n    /* readOnly */\n    )) {\n      const quickfixPlaceholderElement = statusBar.append($('div'));\n\n      if (this.recentMarkerCodeActionsInfo) {\n        if (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n          if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n            quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n          }\n        } else {\n          this.recentMarkerCodeActionsInfo = undefined;\n        }\n      }\n\n      const updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\n\n      if (!quickfixPlaceholderElement.textContent) {\n        // Have some content in here to avoid flickering\n        quickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n      }\n\n      const codeActionsPromise = this.getCodeActions(markerHover.marker);\n      disposables.add(toDisposable(() => codeActionsPromise.cancel()));\n      codeActionsPromise.then(actions => {\n        updatePlaceholderDisposable.dispose();\n        this.recentMarkerCodeActionsInfo = {\n          marker: markerHover.marker,\n          hasCodeActions: actions.validActions.length > 0\n        };\n\n        if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n          actions.dispose();\n          quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n          return;\n        }\n\n        quickfixPlaceholderElement.style.display = 'none';\n        let showing = false;\n        disposables.add(toDisposable(() => {\n          if (!showing) {\n            actions.dispose();\n          }\n        }));\n        statusBar.addAction({\n          label: nls.localize('quick fixes', \"Quick Fix...\"),\n          commandId: QuickFixAction.Id,\n          run: target => {\n            showing = true;\n            const controller = QuickFixController.get(this._editor);\n            const elementPosition = dom.getDomNodePagePosition(target); // Hide the hover pre-emptively, otherwise the editor can close the code actions\n            // context menu as well when using keyboard navigation\n\n            this._hover.hide();\n\n            controller.showCodeActions(markerCodeActionTrigger, actions, {\n              x: elementPosition.left + 6,\n              y: elementPosition.top + elementPosition.height + 6\n            });\n          }\n        });\n      }, onUnexpectedError);\n    }\n  }\n\n  getCodeActions(marker) {\n    return createCancelablePromise(cancellationToken => {\n      return getCodeActions(this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, Progress.None, cancellationToken);\n    });\n  }\n\n};\nMarkerHoverParticipant = __decorate([__param(2, IMarkerDecorationsService), __param(3, IOpenerService)], MarkerHoverParticipant);\nexport { MarkerHoverParticipant };\nregisterThemingParticipant((theme, collector) => {\n  const linkFg = theme.getColor(textLinkForeground);\n\n  if (linkFg) {\n    collector.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${linkFg}; }`);\n  }\n\n  const activeLinkFg = theme.getColor(textLinkActiveForeground);\n\n  if (activeLinkFg) {\n    collector.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${activeLinkFg}; }`);\n  }\n});","map":{"version":3,"sources":["/home/umut/Documents/cs/cs410/Project2Group14/node_modules/monaco-editor/esm/vs/editor/contrib/hover/markerHoverParticipant.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","dom","isNonEmptyArray","createCancelablePromise","disposableTimeout","onUnexpectedError","Disposable","DisposableStore","toDisposable","basename","Range","IMarkerDecorationsService","getCodeActions","QuickFixAction","QuickFixController","CodeActionKind","MarkerController","NextMarkerAction","nls","IMarkerData","MarkerSeverity","IOpenerService","Progress","textLinkActiveForeground","textLinkForeground","registerThemingParticipant","$","MarkerHover","constructor","owner","range","marker","isValidForHoverAnchor","anchor","type","startColumn","endColumn","markerCodeActionTrigger","filter","include","QuickFix","MarkerHoverParticipant","_editor","_hover","_markerDecorationsService","_openerService","recentMarkerCodeActionsInfo","undefined","computeSync","lineDecorations","hasModel","model","getModel","lineNumber","startLineNumber","maxColumn","getLineMaxColumn","result","endLineNumber","getMarker","uri","push","renderHoverParts","hoverParts","fragment","statusBar","None","disposables","forEach","msg","appendChild","renderMarkerHover","markerHoverForStatusbar","sort","a","b","compare","severity","renderMarkerStatusbar","markerHover","hoverElement","markerElement","append","source","message","code","relatedInformation","applyFontInfo","messageElement","style","whiteSpace","innerText","sourceAndCodeElement","sourceElement","codeLink","setAttribute","toString","add","addDisposableListener","e","open","allowCommands","preventDefault","stopPropagation","codeElement","value","detailsElement","opacity","paddingLeft","resource","relatedInfoContainer","marginTop","cursor","fromUserGesture","editorOptions","selection","catch","Error","Warning","Info","addAction","label","localize","commandId","ID","run","hide","get","showAtMarker","focus","getOption","quickfixPlaceholderElement","makeKey","hasCodeActions","textContent","updatePlaceholderDisposable","String","fromCharCode","codeActionsPromise","cancel","then","actions","dispose","validActions","display","showing","Id","controller","elementPosition","getDomNodePagePosition","showCodeActions","x","left","y","top","height","cancellationToken","theme","collector","linkFg","getColor","addRule","activeLinkFg"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { createCancelablePromise, disposableTimeout } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { Range } from '../../common/core/range.js';\nimport { IMarkerDecorationsService } from '../../common/services/markersDecorationService.js';\nimport { getCodeActions } from '../codeAction/codeAction.js';\nimport { QuickFixAction, QuickFixController } from '../codeAction/codeActionCommands.js';\nimport { CodeActionKind } from '../codeAction/types.js';\nimport { MarkerController, NextMarkerAction } from '../gotoError/gotoError.js';\nimport * as nls from '../../../nls.js';\nimport { IMarkerData, MarkerSeverity } from '../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { Progress } from '../../../platform/progress/common/progress.js';\nimport { textLinkActiveForeground, textLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nexport class MarkerHover {\n    constructor(owner, range, marker) {\n        this.owner = owner;\n        this.range = range;\n        this.marker = marker;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nconst markerCodeActionTrigger = {\n    type: 1 /* Invoke */,\n    filter: { include: CodeActionKind.QuickFix }\n};\nlet MarkerHoverParticipant = class MarkerHoverParticipant {\n    constructor(_editor, _hover, _markerDecorationsService, _openerService) {\n        this._editor = _editor;\n        this._hover = _hover;\n        this._markerDecorationsService = _markerDecorationsService;\n        this._openerService = _openerService;\n        this.recentMarkerCodeActionsInfo = undefined;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const marker = this._markerDecorationsService.getMarker(model.uri, d);\n            if (!marker) {\n                continue;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkerHover(this, range, marker));\n        }\n        return result;\n    }\n    renderHoverParts(hoverParts, fragment, statusBar) {\n        if (!hoverParts.length) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        hoverParts.forEach(msg => fragment.appendChild(this.renderMarkerHover(msg, disposables)));\n        const markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n        this.renderMarkerStatusbar(markerHoverForStatusbar, statusBar, disposables);\n        return disposables;\n    }\n    renderMarkerHover(markerHover, disposables) {\n        const hoverElement = $('div.hover-row');\n        const markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n        const { source, message, code, relatedInformation } = markerHover.marker;\n        this._editor.applyFontInfo(markerElement);\n        const messageElement = dom.append(markerElement, $('span'));\n        messageElement.style.whiteSpace = 'pre-wrap';\n        messageElement.innerText = message;\n        if (source || code) {\n            // Code has link\n            if (code && typeof code !== 'string') {\n                const sourceAndCodeElement = $('span');\n                if (source) {\n                    const sourceElement = dom.append(sourceAndCodeElement, $('span'));\n                    sourceElement.innerText = source;\n                }\n                const codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n                codeLink.setAttribute('href', code.target.toString());\n                disposables.add(dom.addDisposableListener(codeLink, 'click', (e) => {\n                    this._openerService.open(code.target, { allowCommands: true });\n                    e.preventDefault();\n                    e.stopPropagation();\n                }));\n                const codeElement = dom.append(codeLink, $('span'));\n                codeElement.innerText = code.value;\n                const detailsElement = dom.append(markerElement, sourceAndCodeElement);\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n            }\n            else {\n                const detailsElement = dom.append(markerElement, $('span'));\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n                detailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n            }\n        }\n        if (isNonEmptyArray(relatedInformation)) {\n            for (const { message, resource, startLineNumber, startColumn } of relatedInformation) {\n                const relatedInfoContainer = dom.append(markerElement, $('div'));\n                relatedInfoContainer.style.marginTop = '8px';\n                const a = dom.append(relatedInfoContainer, $('a'));\n                a.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n                a.style.cursor = 'pointer';\n                disposables.add(dom.addDisposableListener(a, 'click', (e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    if (this._openerService) {\n                        this._openerService.open(resource, {\n                            fromUserGesture: true,\n                            editorOptions: { selection: { startLineNumber, startColumn } }\n                        }).catch(onUnexpectedError);\n                    }\n                }));\n                const messageElement = dom.append(relatedInfoContainer, $('span'));\n                messageElement.innerText = message;\n                this._editor.applyFontInfo(messageElement);\n            }\n        }\n        return hoverElement;\n    }\n    renderMarkerStatusbar(markerHover, statusBar, disposables) {\n        if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n            statusBar.addAction({\n                label: nls.localize('view problem', \"View Problem\"),\n                commandId: NextMarkerAction.ID,\n                run: () => {\n                    this._hover.hide();\n                    MarkerController.get(this._editor).showAtMarker(markerHover.marker);\n                    this._editor.focus();\n                }\n            });\n        }\n        if (!this._editor.getOption(80 /* readOnly */)) {\n            const quickfixPlaceholderElement = statusBar.append($('div'));\n            if (this.recentMarkerCodeActionsInfo) {\n                if (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n                    if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                        quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    }\n                }\n                else {\n                    this.recentMarkerCodeActionsInfo = undefined;\n                }\n            }\n            const updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\n            if (!quickfixPlaceholderElement.textContent) {\n                // Have some content in here to avoid flickering\n                quickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n            }\n            const codeActionsPromise = this.getCodeActions(markerHover.marker);\n            disposables.add(toDisposable(() => codeActionsPromise.cancel()));\n            codeActionsPromise.then(actions => {\n                updatePlaceholderDisposable.dispose();\n                this.recentMarkerCodeActionsInfo = { marker: markerHover.marker, hasCodeActions: actions.validActions.length > 0 };\n                if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                    actions.dispose();\n                    quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    return;\n                }\n                quickfixPlaceholderElement.style.display = 'none';\n                let showing = false;\n                disposables.add(toDisposable(() => {\n                    if (!showing) {\n                        actions.dispose();\n                    }\n                }));\n                statusBar.addAction({\n                    label: nls.localize('quick fixes', \"Quick Fix...\"),\n                    commandId: QuickFixAction.Id,\n                    run: (target) => {\n                        showing = true;\n                        const controller = QuickFixController.get(this._editor);\n                        const elementPosition = dom.getDomNodePagePosition(target);\n                        // Hide the hover pre-emptively, otherwise the editor can close the code actions\n                        // context menu as well when using keyboard navigation\n                        this._hover.hide();\n                        controller.showCodeActions(markerCodeActionTrigger, actions, {\n                            x: elementPosition.left + 6,\n                            y: elementPosition.top + elementPosition.height + 6\n                        });\n                    }\n                });\n            }, onUnexpectedError);\n        }\n    }\n    getCodeActions(marker) {\n        return createCancelablePromise(cancellationToken => {\n            return getCodeActions(this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, Progress.None, cancellationToken);\n        });\n    }\n};\nMarkerHoverParticipant = __decorate([\n    __param(2, IMarkerDecorationsService),\n    __param(3, IOpenerService)\n], MarkerHoverParticipant);\nexport { MarkerHoverParticipant };\nregisterThemingParticipant((theme, collector) => {\n    const linkFg = theme.getColor(textLinkForeground);\n    if (linkFg) {\n        collector.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${linkFg}; }`);\n    }\n    const activeLinkFg = theme.getColor(textLinkActiveForeground);\n    if (activeLinkFg) {\n        collector.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${activeLinkFg}; }`);\n    }\n});\n"]},"metadata":{},"sourceType":"module"}