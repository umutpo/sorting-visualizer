{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\nimport { Disposable, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { CodeEditorWidget } from '../../browser/widget/codeEditorWidget.js';\nimport { DiffEditorWidget } from '../../browser/widget/diffEditorWidget.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\nimport { StandaloneKeybindingService, updateConfigurationService } from './simpleServices.js';\nimport { IStandaloneThemeService } from '../common/standaloneThemeService.js';\nimport { MenuId, MenuRegistry } from '../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService, IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { StandaloneCodeEditorNLS } from '../../common/standaloneStrings.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\nimport { IModelService } from '../../common/services/modelService.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { StandaloneCodeEditorServiceImpl } from './standaloneCodeServiceImpl.js';\nimport { Mimes } from '../../../base/common/mime.js';\nlet LAST_GENERATED_COMMAND_ID = 0;\nlet ariaDomNodeCreated = false;\n/**\n * Create ARIA dom node inside parent,\n * or only for the first editor instantiation inside document.body.\n * @param parent container element for ARIA dom node\n */\n\nfunction createAriaDomNode(parent) {\n  if (!parent) {\n    if (ariaDomNodeCreated) {\n      return;\n    }\n\n    ariaDomNodeCreated = true;\n  }\n\n  aria.setARIAContainer(parent || document.body);\n}\n/**\n * A code editor to be used both by the standalone editor and the standalone diff editor.\n */\n\n\nlet StandaloneCodeEditor = class StandaloneCodeEditor extends CodeEditorWidget {\n  constructor(domElement, _options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService) {\n    const options = Object.assign({}, _options);\n    options.ariaLabel = options.ariaLabel || StandaloneCodeEditorNLS.editorViewAccessibleLabel;\n    options.ariaLabel = options.ariaLabel + ';' + StandaloneCodeEditorNLS.accessibilityHelpMessage;\n    super(domElement, options, {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService);\n\n    if (keybindingService instanceof StandaloneKeybindingService) {\n      this._standaloneKeybindingService = keybindingService;\n    } else {\n      this._standaloneKeybindingService = null;\n    }\n\n    createAriaDomNode(options.ariaContainerElement);\n  }\n\n  addCommand(keybinding, handler, context) {\n    if (!this._standaloneKeybindingService) {\n      console.warn('Cannot add command because the editor is configured with an unrecognized KeybindingService');\n      return null;\n    }\n\n    let commandId = 'DYNAMIC_' + ++LAST_GENERATED_COMMAND_ID;\n    let whenExpression = ContextKeyExpr.deserialize(context);\n\n    this._standaloneKeybindingService.addDynamicKeybinding(commandId, keybinding, handler, whenExpression);\n\n    return commandId;\n  }\n\n  createContextKey(key, defaultValue) {\n    return this._contextKeyService.createKey(key, defaultValue);\n  }\n\n  addAction(_descriptor) {\n    var _this = this;\n\n    if (typeof _descriptor.id !== 'string' || typeof _descriptor.label !== 'string' || typeof _descriptor.run !== 'function') {\n      throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\n    }\n\n    if (!this._standaloneKeybindingService) {\n      console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n      return Disposable.None;\n    } // Read descriptor options\n\n\n    const id = _descriptor.id;\n    const label = _descriptor.label;\n    const precondition = ContextKeyExpr.and(ContextKeyExpr.equals('editorId', this.getId()), ContextKeyExpr.deserialize(_descriptor.precondition));\n    const keybindings = _descriptor.keybindings;\n    const keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(_descriptor.keybindingContext));\n    const contextMenuGroupId = _descriptor.contextMenuGroupId || null;\n    const contextMenuOrder = _descriptor.contextMenuOrder || 0;\n\n    const run = function (accessor) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return Promise.resolve(_descriptor.run(_this, ...args));\n    };\n\n    const toDispose = new DisposableStore(); // Generate a unique id to allow the same descriptor.id across multiple editor instances\n\n    const uniqueId = this.getId() + ':' + id; // Register the command\n\n    toDispose.add(CommandsRegistry.registerCommand(uniqueId, run)); // Register the context menu item\n\n    if (contextMenuGroupId) {\n      let menuItem = {\n        command: {\n          id: uniqueId,\n          title: label\n        },\n        when: precondition,\n        group: contextMenuGroupId,\n        order: contextMenuOrder\n      };\n      toDispose.add(MenuRegistry.appendMenuItem(MenuId.EditorContext, menuItem));\n    } // Register the keybindings\n\n\n    if (Array.isArray(keybindings)) {\n      for (const kb of keybindings) {\n        toDispose.add(this._standaloneKeybindingService.addDynamicKeybinding(uniqueId, kb, run, keybindingsWhen));\n      }\n    } // Finally, register an internal editor action\n\n\n    let internalAction = new InternalEditorAction(uniqueId, label, label, precondition, run, this._contextKeyService); // Store it under the original id, such that trigger with the original id will work\n\n    this._actions[id] = internalAction;\n    toDispose.add(toDisposable(() => {\n      delete this._actions[id];\n    }));\n    return toDispose;\n  }\n\n  _triggerCommand(handlerId, payload) {\n    if (this._codeEditorService instanceof StandaloneCodeEditorServiceImpl) {\n      // Help commands find this editor as the active editor\n      try {\n        this._codeEditorService.setActiveCodeEditor(this);\n\n        super._triggerCommand(handlerId, payload);\n      } finally {\n        this._codeEditorService.setActiveCodeEditor(null);\n      }\n    } else {\n      super._triggerCommand(handlerId, payload);\n    }\n  }\n\n};\nStandaloneCodeEditor = __decorate([__param(2, IInstantiationService), __param(3, ICodeEditorService), __param(4, ICommandService), __param(5, IContextKeyService), __param(6, IKeybindingService), __param(7, IThemeService), __param(8, INotificationService), __param(9, IAccessibilityService)], StandaloneCodeEditor);\nexport { StandaloneCodeEditor };\nlet StandaloneEditor = class StandaloneEditor extends StandaloneCodeEditor {\n  constructor(domElement, _options, toDispose, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, contextViewService, themeService, notificationService, configurationService, accessibilityService, modelService, modeService) {\n    const options = Object.assign({}, _options);\n    updateConfigurationService(configurationService, options, false);\n    const themeDomRegistration = themeService.registerEditorContainer(domElement);\n\n    if (typeof options.theme === 'string') {\n      themeService.setTheme(options.theme);\n    }\n\n    if (typeof options.autoDetectHighContrast !== 'undefined') {\n      themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n    }\n\n    let _model = options.model;\n    delete options.model;\n    super(domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService);\n    this._contextViewService = contextViewService;\n    this._configurationService = configurationService;\n    this._standaloneThemeService = themeService;\n\n    this._register(toDispose);\n\n    this._register(themeDomRegistration);\n\n    let model;\n\n    if (typeof _model === 'undefined') {\n      model = createTextModel(modelService, modeService, options.value || '', options.language || Mimes.text, undefined);\n      this._ownsModel = true;\n    } else {\n      model = _model;\n      this._ownsModel = false;\n    }\n\n    this._attachModel(model);\n\n    if (model) {\n      let e = {\n        oldModelUrl: null,\n        newModelUrl: model.uri\n      };\n\n      this._onDidChangeModel.fire(e);\n    }\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  updateOptions(newOptions) {\n    updateConfigurationService(this._configurationService, newOptions, false);\n\n    if (typeof newOptions.theme === 'string') {\n      this._standaloneThemeService.setTheme(newOptions.theme);\n    }\n\n    if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n      this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n    }\n\n    super.updateOptions(newOptions);\n  }\n\n  _attachModel(model) {\n    super._attachModel(model);\n\n    if (this._modelData) {\n      this._contextViewService.setContainer(this._modelData.view.domNode.domNode);\n    }\n  }\n\n  _postDetachModelCleanup(detachedModel) {\n    super._postDetachModelCleanup(detachedModel);\n\n    if (detachedModel && this._ownsModel) {\n      detachedModel.dispose();\n      this._ownsModel = false;\n    }\n  }\n\n};\nStandaloneEditor = __decorate([__param(3, IInstantiationService), __param(4, ICodeEditorService), __param(5, ICommandService), __param(6, IContextKeyService), __param(7, IKeybindingService), __param(8, IContextViewService), __param(9, IStandaloneThemeService), __param(10, INotificationService), __param(11, IConfigurationService), __param(12, IAccessibilityService), __param(13, IModelService), __param(14, IModeService)], StandaloneEditor);\nexport { StandaloneEditor };\nlet StandaloneDiffEditor = class StandaloneDiffEditor extends DiffEditorWidget {\n  constructor(domElement, _options, toDispose, instantiationService, contextKeyService, keybindingService, contextViewService, editorWorkerService, codeEditorService, themeService, notificationService, configurationService, contextMenuService, editorProgressService, clipboardService) {\n    const options = Object.assign({}, _options);\n    updateConfigurationService(configurationService, options, true);\n    const themeDomRegistration = themeService.registerEditorContainer(domElement);\n\n    if (typeof options.theme === 'string') {\n      themeService.setTheme(options.theme);\n    }\n\n    if (typeof options.autoDetectHighContrast !== 'undefined') {\n      themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n    }\n\n    super(domElement, options, {}, clipboardService, editorWorkerService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, editorProgressService);\n    this._contextViewService = contextViewService;\n    this._configurationService = configurationService;\n    this._standaloneThemeService = themeService;\n\n    this._register(toDispose);\n\n    this._register(themeDomRegistration);\n\n    this._contextViewService.setContainer(this._containerDomElement);\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  updateOptions(newOptions) {\n    updateConfigurationService(this._configurationService, newOptions, true);\n\n    if (typeof newOptions.theme === 'string') {\n      this._standaloneThemeService.setTheme(newOptions.theme);\n    }\n\n    if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n      this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n    }\n\n    super.updateOptions(newOptions);\n  }\n\n  _createInnerEditor(instantiationService, container, options) {\n    return instantiationService.createInstance(StandaloneCodeEditor, container, options);\n  }\n\n  getOriginalEditor() {\n    return super.getOriginalEditor();\n  }\n\n  getModifiedEditor() {\n    return super.getModifiedEditor();\n  }\n\n  addCommand(keybinding, handler, context) {\n    return this.getModifiedEditor().addCommand(keybinding, handler, context);\n  }\n\n  createContextKey(key, defaultValue) {\n    return this.getModifiedEditor().createContextKey(key, defaultValue);\n  }\n\n  addAction(descriptor) {\n    return this.getModifiedEditor().addAction(descriptor);\n  }\n\n};\nStandaloneDiffEditor = __decorate([__param(3, IInstantiationService), __param(4, IContextKeyService), __param(5, IKeybindingService), __param(6, IContextViewService), __param(7, IEditorWorkerService), __param(8, ICodeEditorService), __param(9, IStandaloneThemeService), __param(10, INotificationService), __param(11, IConfigurationService), __param(12, IContextMenuService), __param(13, IEditorProgressService), __param(14, IClipboardService)], StandaloneDiffEditor);\nexport { StandaloneDiffEditor };\n/**\n * @internal\n */\n\nexport function createTextModel(modelService, modeService, value, language, uri) {\n  value = value || '';\n\n  if (!language) {\n    const firstLF = value.indexOf('\\n');\n    let firstLine = value;\n\n    if (firstLF !== -1) {\n      firstLine = value.substring(0, firstLF);\n    }\n\n    return doCreateModel(modelService, value, modeService.createByFilepathOrFirstLine(uri || null, firstLine), uri);\n  }\n\n  return doCreateModel(modelService, value, modeService.create(language), uri);\n}\n/**\n * @internal\n */\n\nfunction doCreateModel(modelService, value, languageSelection, uri) {\n  return modelService.createModel(value, languageSelection, uri);\n}","map":{"version":3,"sources":["/home/umut/Documents/cs/cs410/Project2Group14/node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditor.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","aria","Disposable","toDisposable","DisposableStore","ICodeEditorService","CodeEditorWidget","DiffEditorWidget","InternalEditorAction","IEditorWorkerService","StandaloneKeybindingService","updateConfigurationService","IStandaloneThemeService","MenuId","MenuRegistry","CommandsRegistry","ICommandService","IConfigurationService","ContextKeyExpr","IContextKeyService","IContextViewService","IContextMenuService","IInstantiationService","IKeybindingService","INotificationService","IThemeService","IAccessibilityService","StandaloneCodeEditorNLS","IClipboardService","IEditorProgressService","IModelService","IModeService","StandaloneCodeEditorServiceImpl","Mimes","LAST_GENERATED_COMMAND_ID","ariaDomNodeCreated","createAriaDomNode","parent","setARIAContainer","document","body","StandaloneCodeEditor","constructor","domElement","_options","instantiationService","codeEditorService","commandService","contextKeyService","keybindingService","themeService","notificationService","accessibilityService","options","assign","ariaLabel","editorViewAccessibleLabel","accessibilityHelpMessage","_standaloneKeybindingService","ariaContainerElement","addCommand","keybinding","handler","context","console","warn","commandId","whenExpression","deserialize","addDynamicKeybinding","createContextKey","defaultValue","_contextKeyService","createKey","addAction","_descriptor","id","label","run","Error","None","precondition","and","equals","getId","keybindings","keybindingsWhen","keybindingContext","contextMenuGroupId","contextMenuOrder","accessor","args","Promise","resolve","toDispose","uniqueId","add","registerCommand","menuItem","command","title","when","group","order","appendMenuItem","EditorContext","Array","isArray","kb","internalAction","_actions","_triggerCommand","handlerId","payload","_codeEditorService","setActiveCodeEditor","StandaloneEditor","contextViewService","configurationService","modelService","modeService","themeDomRegistration","registerEditorContainer","theme","setTheme","autoDetectHighContrast","setAutoDetectHighContrast","Boolean","_model","model","_contextViewService","_configurationService","_standaloneThemeService","_register","createTextModel","value","language","text","undefined","_ownsModel","_attachModel","e","oldModelUrl","newModelUrl","uri","_onDidChangeModel","fire","dispose","updateOptions","newOptions","_modelData","setContainer","view","domNode","_postDetachModelCleanup","detachedModel","StandaloneDiffEditor","editorWorkerService","contextMenuService","editorProgressService","clipboardService","_containerDomElement","_createInnerEditor","container","createInstance","getOriginalEditor","getModifiedEditor","descriptor","firstLF","indexOf","firstLine","substring","doCreateModel","createByFilepathOrFirstLine","create","languageSelection","createModel"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\nimport { Disposable, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { CodeEditorWidget } from '../../browser/widget/codeEditorWidget.js';\nimport { DiffEditorWidget } from '../../browser/widget/diffEditorWidget.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\nimport { StandaloneKeybindingService, updateConfigurationService } from './simpleServices.js';\nimport { IStandaloneThemeService } from '../common/standaloneThemeService.js';\nimport { MenuId, MenuRegistry } from '../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService, IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { StandaloneCodeEditorNLS } from '../../common/standaloneStrings.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\nimport { IModelService } from '../../common/services/modelService.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { StandaloneCodeEditorServiceImpl } from './standaloneCodeServiceImpl.js';\nimport { Mimes } from '../../../base/common/mime.js';\nlet LAST_GENERATED_COMMAND_ID = 0;\nlet ariaDomNodeCreated = false;\n/**\n * Create ARIA dom node inside parent,\n * or only for the first editor instantiation inside document.body.\n * @param parent container element for ARIA dom node\n */\nfunction createAriaDomNode(parent) {\n    if (!parent) {\n        if (ariaDomNodeCreated) {\n            return;\n        }\n        ariaDomNodeCreated = true;\n    }\n    aria.setARIAContainer(parent || document.body);\n}\n/**\n * A code editor to be used both by the standalone editor and the standalone diff editor.\n */\nlet StandaloneCodeEditor = class StandaloneCodeEditor extends CodeEditorWidget {\n    constructor(domElement, _options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService) {\n        const options = Object.assign({}, _options);\n        options.ariaLabel = options.ariaLabel || StandaloneCodeEditorNLS.editorViewAccessibleLabel;\n        options.ariaLabel = options.ariaLabel + ';' + (StandaloneCodeEditorNLS.accessibilityHelpMessage);\n        super(domElement, options, {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService);\n        if (keybindingService instanceof StandaloneKeybindingService) {\n            this._standaloneKeybindingService = keybindingService;\n        }\n        else {\n            this._standaloneKeybindingService = null;\n        }\n        createAriaDomNode(options.ariaContainerElement);\n    }\n    addCommand(keybinding, handler, context) {\n        if (!this._standaloneKeybindingService) {\n            console.warn('Cannot add command because the editor is configured with an unrecognized KeybindingService');\n            return null;\n        }\n        let commandId = 'DYNAMIC_' + (++LAST_GENERATED_COMMAND_ID);\n        let whenExpression = ContextKeyExpr.deserialize(context);\n        this._standaloneKeybindingService.addDynamicKeybinding(commandId, keybinding, handler, whenExpression);\n        return commandId;\n    }\n    createContextKey(key, defaultValue) {\n        return this._contextKeyService.createKey(key, defaultValue);\n    }\n    addAction(_descriptor) {\n        if ((typeof _descriptor.id !== 'string') || (typeof _descriptor.label !== 'string') || (typeof _descriptor.run !== 'function')) {\n            throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\n        }\n        if (!this._standaloneKeybindingService) {\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n            return Disposable.None;\n        }\n        // Read descriptor options\n        const id = _descriptor.id;\n        const label = _descriptor.label;\n        const precondition = ContextKeyExpr.and(ContextKeyExpr.equals('editorId', this.getId()), ContextKeyExpr.deserialize(_descriptor.precondition));\n        const keybindings = _descriptor.keybindings;\n        const keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(_descriptor.keybindingContext));\n        const contextMenuGroupId = _descriptor.contextMenuGroupId || null;\n        const contextMenuOrder = _descriptor.contextMenuOrder || 0;\n        const run = (accessor, ...args) => {\n            return Promise.resolve(_descriptor.run(this, ...args));\n        };\n        const toDispose = new DisposableStore();\n        // Generate a unique id to allow the same descriptor.id across multiple editor instances\n        const uniqueId = this.getId() + ':' + id;\n        // Register the command\n        toDispose.add(CommandsRegistry.registerCommand(uniqueId, run));\n        // Register the context menu item\n        if (contextMenuGroupId) {\n            let menuItem = {\n                command: {\n                    id: uniqueId,\n                    title: label\n                },\n                when: precondition,\n                group: contextMenuGroupId,\n                order: contextMenuOrder\n            };\n            toDispose.add(MenuRegistry.appendMenuItem(MenuId.EditorContext, menuItem));\n        }\n        // Register the keybindings\n        if (Array.isArray(keybindings)) {\n            for (const kb of keybindings) {\n                toDispose.add(this._standaloneKeybindingService.addDynamicKeybinding(uniqueId, kb, run, keybindingsWhen));\n            }\n        }\n        // Finally, register an internal editor action\n        let internalAction = new InternalEditorAction(uniqueId, label, label, precondition, run, this._contextKeyService);\n        // Store it under the original id, such that trigger with the original id will work\n        this._actions[id] = internalAction;\n        toDispose.add(toDisposable(() => {\n            delete this._actions[id];\n        }));\n        return toDispose;\n    }\n    _triggerCommand(handlerId, payload) {\n        if (this._codeEditorService instanceof StandaloneCodeEditorServiceImpl) {\n            // Help commands find this editor as the active editor\n            try {\n                this._codeEditorService.setActiveCodeEditor(this);\n                super._triggerCommand(handlerId, payload);\n            }\n            finally {\n                this._codeEditorService.setActiveCodeEditor(null);\n            }\n        }\n        else {\n            super._triggerCommand(handlerId, payload);\n        }\n    }\n};\nStandaloneCodeEditor = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ICodeEditorService),\n    __param(4, ICommandService),\n    __param(5, IContextKeyService),\n    __param(6, IKeybindingService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService)\n], StandaloneCodeEditor);\nexport { StandaloneCodeEditor };\nlet StandaloneEditor = class StandaloneEditor extends StandaloneCodeEditor {\n    constructor(domElement, _options, toDispose, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, contextViewService, themeService, notificationService, configurationService, accessibilityService, modelService, modeService) {\n        const options = Object.assign({}, _options);\n        updateConfigurationService(configurationService, options, false);\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\n        if (typeof options.theme === 'string') {\n            themeService.setTheme(options.theme);\n        }\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n        }\n        let _model = options.model;\n        delete options.model;\n        super(domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService);\n        this._contextViewService = contextViewService;\n        this._configurationService = configurationService;\n        this._standaloneThemeService = themeService;\n        this._register(toDispose);\n        this._register(themeDomRegistration);\n        let model;\n        if (typeof _model === 'undefined') {\n            model = createTextModel(modelService, modeService, options.value || '', options.language || Mimes.text, undefined);\n            this._ownsModel = true;\n        }\n        else {\n            model = _model;\n            this._ownsModel = false;\n        }\n        this._attachModel(model);\n        if (model) {\n            let e = {\n                oldModelUrl: null,\n                newModelUrl: model.uri\n            };\n            this._onDidChangeModel.fire(e);\n        }\n    }\n    dispose() {\n        super.dispose();\n    }\n    updateOptions(newOptions) {\n        updateConfigurationService(this._configurationService, newOptions, false);\n        if (typeof newOptions.theme === 'string') {\n            this._standaloneThemeService.setTheme(newOptions.theme);\n        }\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n        }\n        super.updateOptions(newOptions);\n    }\n    _attachModel(model) {\n        super._attachModel(model);\n        if (this._modelData) {\n            this._contextViewService.setContainer(this._modelData.view.domNode.domNode);\n        }\n    }\n    _postDetachModelCleanup(detachedModel) {\n        super._postDetachModelCleanup(detachedModel);\n        if (detachedModel && this._ownsModel) {\n            detachedModel.dispose();\n            this._ownsModel = false;\n        }\n    }\n};\nStandaloneEditor = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, ICodeEditorService),\n    __param(5, ICommandService),\n    __param(6, IContextKeyService),\n    __param(7, IKeybindingService),\n    __param(8, IContextViewService),\n    __param(9, IStandaloneThemeService),\n    __param(10, INotificationService),\n    __param(11, IConfigurationService),\n    __param(12, IAccessibilityService),\n    __param(13, IModelService),\n    __param(14, IModeService)\n], StandaloneEditor);\nexport { StandaloneEditor };\nlet StandaloneDiffEditor = class StandaloneDiffEditor extends DiffEditorWidget {\n    constructor(domElement, _options, toDispose, instantiationService, contextKeyService, keybindingService, contextViewService, editorWorkerService, codeEditorService, themeService, notificationService, configurationService, contextMenuService, editorProgressService, clipboardService) {\n        const options = Object.assign({}, _options);\n        updateConfigurationService(configurationService, options, true);\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\n        if (typeof options.theme === 'string') {\n            themeService.setTheme(options.theme);\n        }\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n        }\n        super(domElement, options, {}, clipboardService, editorWorkerService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, editorProgressService);\n        this._contextViewService = contextViewService;\n        this._configurationService = configurationService;\n        this._standaloneThemeService = themeService;\n        this._register(toDispose);\n        this._register(themeDomRegistration);\n        this._contextViewService.setContainer(this._containerDomElement);\n    }\n    dispose() {\n        super.dispose();\n    }\n    updateOptions(newOptions) {\n        updateConfigurationService(this._configurationService, newOptions, true);\n        if (typeof newOptions.theme === 'string') {\n            this._standaloneThemeService.setTheme(newOptions.theme);\n        }\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n        }\n        super.updateOptions(newOptions);\n    }\n    _createInnerEditor(instantiationService, container, options) {\n        return instantiationService.createInstance(StandaloneCodeEditor, container, options);\n    }\n    getOriginalEditor() {\n        return super.getOriginalEditor();\n    }\n    getModifiedEditor() {\n        return super.getModifiedEditor();\n    }\n    addCommand(keybinding, handler, context) {\n        return this.getModifiedEditor().addCommand(keybinding, handler, context);\n    }\n    createContextKey(key, defaultValue) {\n        return this.getModifiedEditor().createContextKey(key, defaultValue);\n    }\n    addAction(descriptor) {\n        return this.getModifiedEditor().addAction(descriptor);\n    }\n};\nStandaloneDiffEditor = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, IContextKeyService),\n    __param(5, IKeybindingService),\n    __param(6, IContextViewService),\n    __param(7, IEditorWorkerService),\n    __param(8, ICodeEditorService),\n    __param(9, IStandaloneThemeService),\n    __param(10, INotificationService),\n    __param(11, IConfigurationService),\n    __param(12, IContextMenuService),\n    __param(13, IEditorProgressService),\n    __param(14, IClipboardService)\n], StandaloneDiffEditor);\nexport { StandaloneDiffEditor };\n/**\n * @internal\n */\nexport function createTextModel(modelService, modeService, value, language, uri) {\n    value = value || '';\n    if (!language) {\n        const firstLF = value.indexOf('\\n');\n        let firstLine = value;\n        if (firstLF !== -1) {\n            firstLine = value.substring(0, firstLF);\n        }\n        return doCreateModel(modelService, value, modeService.createByFilepathOrFirstLine(uri || null, firstLine), uri);\n    }\n    return doCreateModel(modelService, value, modeService.create(language), uri);\n}\n/**\n * @internal\n */\nfunction doCreateModel(modelService, value, languageSelection, uri) {\n    return modelService.createModel(value, languageSelection, uri);\n}\n"]},"metadata":{},"sourceType":"module"}