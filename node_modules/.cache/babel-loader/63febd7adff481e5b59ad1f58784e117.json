{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport * as dom from '../../../base/browser/dom.js';\nimport { asArray } from '../../../base/common/arrays.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../browser/core/markdownRenderer.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { HoverProviderRegistry } from '../../common/modes.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { getHover } from './getHover.js';\nimport * as nls from '../../../nls.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nconst $ = dom.$;\nexport class MarkdownHover {\n  constructor(owner, range, contents) {\n    this.owner = owner;\n    this.range = range;\n    this.contents = contents;\n  }\n\n  isValidForHoverAnchor(anchor) {\n    return anchor.type === 1\n    /* Range */\n    && this.range.startColumn <= anchor.range.startColumn && this.range.endColumn >= anchor.range.endColumn;\n  }\n\n}\nlet MarkdownHoverParticipant = class MarkdownHoverParticipant {\n  constructor(_editor, _hover, _modeService, _openerService, _configurationService) {\n    this._editor = _editor;\n    this._hover = _hover;\n    this._modeService = _modeService;\n    this._openerService = _openerService;\n    this._configurationService = _configurationService;\n  }\n\n  createLoadingMessage(anchor) {\n    return new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))]);\n  }\n\n  computeSync(anchor, lineDecorations) {\n    if (!this._editor.hasModel() || anchor.type !== 1\n    /* Range */\n    ) {\n      return [];\n    }\n\n    const model = this._editor.getModel();\n\n    const lineNumber = anchor.range.startLineNumber;\n    const maxColumn = model.getLineMaxColumn(lineNumber);\n    const result = [];\n\n    for (const d of lineDecorations) {\n      const startColumn = d.range.startLineNumber === lineNumber ? d.range.startColumn : 1;\n      const endColumn = d.range.endLineNumber === lineNumber ? d.range.endColumn : maxColumn;\n      const hoverMessage = d.options.hoverMessage;\n\n      if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n        continue;\n      }\n\n      const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n      result.push(new MarkdownHover(this, range, asArray(hoverMessage)));\n    }\n\n    const lineLength = model.getLineLength(lineNumber);\n    const languageId = model.getLanguageIdAtPosition(anchor.range.startLineNumber, anchor.range.startColumn);\n\n    const maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n      overrideIdentifier: languageId\n    });\n\n    if (typeof maxTokenizationLineLength === 'number' && lineLength >= maxTokenizationLineLength) {\n      result.push(new MarkdownHover(this, anchor.range, [{\n        value: nls.localize('too many characters', \"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.\")\n      }]));\n    }\n\n    return result;\n  }\n\n  computeAsync(anchor, lineDecorations, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!this._editor.hasModel() || anchor.type !== 1\n      /* Range */\n      ) {\n        return Promise.resolve([]);\n      }\n\n      const model = this._editor.getModel();\n\n      if (!HoverProviderRegistry.has(model)) {\n        return Promise.resolve([]);\n      }\n\n      const hovers = yield getHover(model, new Position(anchor.range.startLineNumber, anchor.range.startColumn), token);\n      const result = [];\n\n      for (const hover of hovers) {\n        if (isEmptyMarkdownString(hover.contents)) {\n          continue;\n        }\n\n        const rng = hover.range ? Range.lift(hover.range) : anchor.range;\n        result.push(new MarkdownHover(this, rng, hover.contents));\n      }\n\n      return result;\n    });\n  }\n\n  renderHoverParts(hoverParts, fragment, statusBar) {\n    const disposables = new DisposableStore();\n\n    for (const hoverPart of hoverParts) {\n      for (const contents of hoverPart.contents) {\n        if (isEmptyMarkdownString(contents)) {\n          continue;\n        }\n\n        const markdownHoverElement = $('div.hover-row.markdown-hover');\n        const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n        const renderer = disposables.add(new MarkdownRenderer({\n          editor: this._editor\n        }, this._modeService, this._openerService));\n        disposables.add(renderer.onDidRenderAsync(() => {\n          hoverContentsElement.className = 'hover-contents code-hover-contents';\n\n          this._hover.onContentsChanged();\n        }));\n        const renderedContents = disposables.add(renderer.render(contents));\n        hoverContentsElement.appendChild(renderedContents.element);\n        fragment.appendChild(markdownHoverElement);\n      }\n    }\n\n    return disposables;\n  }\n\n};\nMarkdownHoverParticipant = __decorate([__param(2, IModeService), __param(3, IOpenerService), __param(4, IConfigurationService)], MarkdownHoverParticipant);\nexport { MarkdownHoverParticipant };","map":{"version":3,"sources":["/home/umut/Documents/cs/cs410/Project2Group14/node_modules/monaco-editor/esm/vs/editor/contrib/hover/markdownHoverParticipant.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","dom","asArray","isEmptyMarkdownString","MarkdownString","DisposableStore","MarkdownRenderer","Position","Range","HoverProviderRegistry","IModeService","getHover","nls","IConfigurationService","IOpenerService","$","MarkdownHover","constructor","owner","range","contents","isValidForHoverAnchor","anchor","type","startColumn","endColumn","MarkdownHoverParticipant","_editor","_hover","_modeService","_openerService","_configurationService","createLoadingMessage","appendText","localize","computeSync","lineDecorations","hasModel","model","getModel","lineNumber","startLineNumber","maxColumn","getLineMaxColumn","endLineNumber","hoverMessage","options","push","lineLength","getLineLength","languageId","getLanguageIdAtPosition","maxTokenizationLineLength","getValue","overrideIdentifier","computeAsync","token","has","hovers","hover","rng","lift","renderHoverParts","hoverParts","fragment","statusBar","disposables","hoverPart","markdownHoverElement","hoverContentsElement","append","renderer","add","editor","onDidRenderAsync","className","onContentsChanged","renderedContents","render","appendChild","element"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { asArray } from '../../../base/common/arrays.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../browser/core/markdownRenderer.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { HoverProviderRegistry } from '../../common/modes.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { getHover } from './getHover.js';\nimport * as nls from '../../../nls.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nconst $ = dom.$;\nexport class MarkdownHover {\n    constructor(owner, range, contents) {\n        this.owner = owner;\n        this.range = range;\n        this.contents = contents;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet MarkdownHoverParticipant = class MarkdownHoverParticipant {\n    constructor(_editor, _hover, _modeService, _openerService, _configurationService) {\n        this._editor = _editor;\n        this._hover = _hover;\n        this._modeService = _modeService;\n        this._openerService = _openerService;\n        this._configurationService = _configurationService;\n    }\n    createLoadingMessage(anchor) {\n        return new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))]);\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const hoverMessage = d.options.hoverMessage;\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n                continue;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkdownHover(this, range, asArray(hoverMessage)));\n        }\n        const lineLength = model.getLineLength(lineNumber);\n        const languageId = model.getLanguageIdAtPosition(anchor.range.startLineNumber, anchor.range.startColumn);\n        const maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n            overrideIdentifier: languageId\n        });\n        if (typeof maxTokenizationLineLength === 'number' && lineLength >= maxTokenizationLineLength) {\n            result.push(new MarkdownHover(this, anchor.range, [{\n                    value: nls.localize('too many characters', \"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.\")\n                }]));\n        }\n        return result;\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || anchor.type !== 1 /* Range */) {\n                return Promise.resolve([]);\n            }\n            const model = this._editor.getModel();\n            if (!HoverProviderRegistry.has(model)) {\n                return Promise.resolve([]);\n            }\n            const hovers = yield getHover(model, new Position(anchor.range.startLineNumber, anchor.range.startColumn), token);\n            const result = [];\n            for (const hover of hovers) {\n                if (isEmptyMarkdownString(hover.contents)) {\n                    continue;\n                }\n                const rng = hover.range ? Range.lift(hover.range) : anchor.range;\n                result.push(new MarkdownHover(this, rng, hover.contents));\n            }\n            return result;\n        });\n    }\n    renderHoverParts(hoverParts, fragment, statusBar) {\n        const disposables = new DisposableStore();\n        for (const hoverPart of hoverParts) {\n            for (const contents of hoverPart.contents) {\n                if (isEmptyMarkdownString(contents)) {\n                    continue;\n                }\n                const markdownHoverElement = $('div.hover-row.markdown-hover');\n                const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n                const renderer = disposables.add(new MarkdownRenderer({ editor: this._editor }, this._modeService, this._openerService));\n                disposables.add(renderer.onDidRenderAsync(() => {\n                    hoverContentsElement.className = 'hover-contents code-hover-contents';\n                    this._hover.onContentsChanged();\n                }));\n                const renderedContents = disposables.add(renderer.render(contents));\n                hoverContentsElement.appendChild(renderedContents.element);\n                fragment.appendChild(markdownHoverElement);\n            }\n        }\n        return disposables;\n    }\n};\nMarkdownHoverParticipant = __decorate([\n    __param(2, IModeService),\n    __param(3, IOpenerService),\n    __param(4, IConfigurationService)\n], MarkdownHoverParticipant);\nexport { MarkdownHoverParticipant };\n"]},"metadata":{},"sourceType":"module"}