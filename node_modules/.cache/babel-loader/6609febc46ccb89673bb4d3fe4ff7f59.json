{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { KeyChord } from '../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { Range } from '../../common/core/range.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { GotoDefinitionAtPositionEditorContribution } from '../gotoSymbol/link/goToDefinitionAtPosition.js';\nimport { ModesContentHoverWidget } from './modesContentHover.js';\nimport { ModesGlyphHoverWidget } from './modesGlyphHover.js';\nimport * as nls from '../../../nls.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, editorHoverHighlight, editorHoverStatusBarBackground, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nlet ModesHoverController = class ModesHoverController {\n  constructor(_editor, _instantiationService, _openerService, _modeService, _contextKeyService) {\n    this._editor = _editor;\n    this._instantiationService = _instantiationService;\n    this._openerService = _openerService;\n    this._modeService = _modeService;\n    this._toUnhook = new DisposableStore();\n    this._isMouseDown = false;\n    this._hoverClicked = false;\n    this._contentWidget = null;\n    this._glyphWidget = null;\n\n    this._hookEvents();\n\n    this._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(52\n      /* hover */\n      )) {\n        this._unhookEvents();\n\n        this._hookEvents();\n      }\n    });\n    this._hoverVisibleKey = EditorContextKeys.hoverVisible.bindTo(_contextKeyService);\n  }\n\n  static get(editor) {\n    return editor.getContribution(ModesHoverController.ID);\n  }\n\n  _hookEvents() {\n    const hideWidgetsEventHandler = () => this._hideWidgets();\n\n    const hoverOpts = this._editor.getOption(52\n    /* hover */\n    );\n\n    this._isHoverEnabled = hoverOpts.enabled;\n    this._isHoverSticky = hoverOpts.sticky;\n\n    if (this._isHoverEnabled) {\n      this._toUnhook.add(this._editor.onMouseDown(e => this._onEditorMouseDown(e)));\n\n      this._toUnhook.add(this._editor.onMouseUp(e => this._onEditorMouseUp(e)));\n\n      this._toUnhook.add(this._editor.onMouseMove(e => this._onEditorMouseMove(e)));\n\n      this._toUnhook.add(this._editor.onKeyDown(e => this._onKeyDown(e)));\n\n      this._toUnhook.add(this._editor.onDidChangeModelDecorations(() => this._onModelDecorationsChanged()));\n    } else {\n      this._toUnhook.add(this._editor.onMouseMove(e => this._onEditorMouseMove(e)));\n\n      this._toUnhook.add(this._editor.onKeyDown(e => this._onKeyDown(e)));\n    }\n\n    this._toUnhook.add(this._editor.onMouseLeave(hideWidgetsEventHandler));\n\n    this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\n\n    this._toUnhook.add(this._editor.onDidScrollChange(e => this._onEditorScrollChanged(e)));\n  }\n\n  _unhookEvents() {\n    this._toUnhook.clear();\n  }\n\n  _onModelDecorationsChanged() {\n    var _a, _b;\n\n    (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.onModelDecorationsChanged();\n    (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.onModelDecorationsChanged();\n  }\n\n  _onEditorScrollChanged(e) {\n    if (e.scrollTopChanged || e.scrollLeftChanged) {\n      this._hideWidgets();\n    }\n  }\n\n  _onEditorMouseDown(mouseEvent) {\n    this._isMouseDown = true;\n    const targetType = mouseEvent.target.type;\n\n    if (targetType === 9\n    /* CONTENT_WIDGET */\n    && mouseEvent.target.detail === ModesContentHoverWidget.ID) {\n      this._hoverClicked = true; // mouse down on top of content hover widget\n\n      return;\n    }\n\n    if (targetType === 12\n    /* OVERLAY_WIDGET */\n    && mouseEvent.target.detail === ModesGlyphHoverWidget.ID) {\n      // mouse down on top of overlay hover widget\n      return;\n    }\n\n    if (targetType !== 12\n    /* OVERLAY_WIDGET */\n    && mouseEvent.target.detail !== ModesGlyphHoverWidget.ID) {\n      this._hoverClicked = false;\n    }\n\n    this._hideWidgets();\n  }\n\n  _onEditorMouseUp(mouseEvent) {\n    this._isMouseDown = false;\n  }\n\n  _onEditorMouseMove(mouseEvent) {\n    var _a, _b, _c, _d, _e;\n\n    let targetType = mouseEvent.target.type;\n\n    if (this._isMouseDown && this._hoverClicked) {\n      return;\n    }\n\n    if (this._isHoverSticky && targetType === 9\n    /* CONTENT_WIDGET */\n    && mouseEvent.target.detail === ModesContentHoverWidget.ID) {\n      // mouse moved on top of content hover widget\n      return;\n    }\n\n    if (this._isHoverSticky && !((_b = (_a = mouseEvent.event.browserEvent.view) === null || _a === void 0 ? void 0 : _a.getSelection()) === null || _b === void 0 ? void 0 : _b.isCollapsed)) {\n      // selected text within content hover widget\n      return;\n    }\n\n    if (!this._isHoverSticky && targetType === 9\n    /* CONTENT_WIDGET */\n    && mouseEvent.target.detail === ModesContentHoverWidget.ID && ((_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.isColorPickerVisible())) {\n      // though the hover is not sticky, the color picker needs to.\n      return;\n    }\n\n    if (this._isHoverSticky && targetType === 12\n    /* OVERLAY_WIDGET */\n    && mouseEvent.target.detail === ModesGlyphHoverWidget.ID) {\n      // mouse moved on top of overlay hover widget\n      return;\n    }\n\n    if (!this._isHoverEnabled) {\n      this._hideWidgets();\n\n      return;\n    }\n\n    const contentWidget = this._getOrCreateContentWidget();\n\n    if (contentWidget.maybeShowAt(mouseEvent)) {\n      (_d = this._glyphWidget) === null || _d === void 0 ? void 0 : _d.hide();\n      return;\n    }\n\n    if (targetType === 2\n    /* GUTTER_GLYPH_MARGIN */\n    && mouseEvent.target.position) {\n      (_e = this._contentWidget) === null || _e === void 0 ? void 0 : _e.hide();\n\n      if (!this._glyphWidget) {\n        this._glyphWidget = new ModesGlyphHoverWidget(this._editor, this._modeService, this._openerService);\n      }\n\n      this._glyphWidget.startShowingAt(mouseEvent.target.position.lineNumber);\n\n      return;\n    }\n\n    this._hideWidgets();\n  }\n\n  _onKeyDown(e) {\n    if (e.keyCode !== 5\n    /* Ctrl */\n    && e.keyCode !== 6\n    /* Alt */\n    && e.keyCode !== 57\n    /* Meta */\n    && e.keyCode !== 4\n    /* Shift */\n    ) {\n      // Do not hide hover when a modifier key is pressed\n      this._hideWidgets();\n    }\n  }\n\n  _hideWidgets() {\n    var _a, _b, _c;\n\n    if (this._isMouseDown && this._hoverClicked && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible())) {\n      return;\n    }\n\n    this._hoverClicked = false;\n    (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\n    (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\n  }\n\n  _getOrCreateContentWidget() {\n    if (!this._contentWidget) {\n      this._contentWidget = this._instantiationService.createInstance(ModesContentHoverWidget, this._editor, this._hoverVisibleKey);\n    }\n\n    return this._contentWidget;\n  }\n\n  isColorPickerVisible() {\n    var _a;\n\n    return ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()) || false;\n  }\n\n  showContentHover(range, mode, focus) {\n    this._getOrCreateContentWidget().startShowingAtRange(range, mode, focus);\n  }\n\n  dispose() {\n    var _a, _b;\n\n    this._unhookEvents();\n\n    this._toUnhook.dispose();\n\n    this._didChangeConfigurationHandler.dispose();\n\n    (_a = this._glyphWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n    (_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.dispose();\n  }\n\n};\nModesHoverController.ID = 'editor.contrib.hover';\nModesHoverController = __decorate([__param(1, IInstantiationService), __param(2, IOpenerService), __param(3, IModeService), __param(4, IContextKeyService)], ModesHoverController);\nexport { ModesHoverController };\n\nclass ShowHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.showHover',\n      label: nls.localize({\n        key: 'showHover',\n        comment: ['Label for action that will trigger the showing of a hover in the editor.', 'This allows for users to show the hover without using the mouse.']\n      }, \"Show Hover\"),\n      alias: 'Show Hover',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KeyK */\n        , 2048\n        /* CtrlCmd */\n        | 39\n        /* KeyI */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    });\n  }\n\n  run(accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    let controller = ModesHoverController.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    const position = editor.getPosition();\n    const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n    const focus = editor.getOption(2\n    /* accessibilitySupport */\n    ) === 2\n    /* Enabled */\n    ;\n    controller.showContentHover(range, 1\n    /* Immediate */\n    , focus);\n  }\n\n}\n\nclass ShowDefinitionPreviewHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.showDefinitionPreviewHover',\n      label: nls.localize({\n        key: 'showDefinitionPreviewHover',\n        comment: ['Label for action that will trigger the showing of definition preview hover in the editor.', 'This allows for users to show the definition preview hover without using the mouse.']\n      }, \"Show Definition Preview Hover\"),\n      alias: 'Show Definition Preview Hover',\n      precondition: undefined\n    });\n  }\n\n  run(accessor, editor) {\n    let controller = ModesHoverController.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    const position = editor.getPosition();\n\n    if (!position) {\n      return;\n    }\n\n    const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n    const goto = GotoDefinitionAtPositionEditorContribution.get(editor);\n    const promise = goto.startFindDefinitionFromCursor(position);\n    promise.then(() => {\n      controller.showContentHover(range, 1\n      /* Immediate */\n      , true);\n    });\n  }\n\n}\n\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController);\nregisterEditorAction(ShowHoverAction);\nregisterEditorAction(ShowDefinitionPreviewHoverAction); // theming\n\nregisterThemingParticipant((theme, collector) => {\n  const editorHoverHighlightColor = theme.getColor(editorHoverHighlight);\n\n  if (editorHoverHighlightColor) {\n    collector.addRule(`.monaco-editor .hoverHighlight { background-color: ${editorHoverHighlightColor}; }`);\n  }\n\n  const hoverBackground = theme.getColor(editorHoverBackground);\n\n  if (hoverBackground) {\n    collector.addRule(`.monaco-editor .monaco-hover { background-color: ${hoverBackground}; }`);\n  }\n\n  const hoverBorder = theme.getColor(editorHoverBorder);\n\n  if (hoverBorder) {\n    collector.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${hoverBorder}; }`);\n    collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n    collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n    collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\n  }\n\n  const link = theme.getColor(textLinkForeground);\n\n  if (link) {\n    collector.addRule(`.monaco-editor .monaco-hover a { color: ${link}; }`);\n  }\n\n  const linkHover = theme.getColor(textLinkActiveForeground);\n\n  if (linkHover) {\n    collector.addRule(`.monaco-editor .monaco-hover a:hover { color: ${linkHover}; }`);\n  }\n\n  const hoverForeground = theme.getColor(editorHoverForeground);\n\n  if (hoverForeground) {\n    collector.addRule(`.monaco-editor .monaco-hover { color: ${hoverForeground}; }`);\n  }\n\n  const actionsBackground = theme.getColor(editorHoverStatusBarBackground);\n\n  if (actionsBackground) {\n    collector.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${actionsBackground}; }`);\n  }\n\n  const codeBackground = theme.getColor(textCodeBlockBackground);\n\n  if (codeBackground) {\n    collector.addRule(`.monaco-editor .monaco-hover code { background-color: ${codeBackground}; }`);\n  }\n});","map":{"version":3,"sources":["/home/umut/Documents/cs/cs410/Project2Group14/node_modules/monaco-editor/esm/vs/editor/contrib/hover/hover.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","KeyChord","DisposableStore","EditorAction","registerEditorAction","registerEditorContribution","Range","EditorContextKeys","IModeService","GotoDefinitionAtPositionEditorContribution","ModesContentHoverWidget","ModesGlyphHoverWidget","nls","IContextKeyService","IInstantiationService","IOpenerService","editorHoverBackground","editorHoverBorder","editorHoverForeground","editorHoverHighlight","editorHoverStatusBarBackground","textCodeBlockBackground","textLinkActiveForeground","textLinkForeground","registerThemingParticipant","ModesHoverController","constructor","_editor","_instantiationService","_openerService","_modeService","_contextKeyService","_toUnhook","_isMouseDown","_hoverClicked","_contentWidget","_glyphWidget","_hookEvents","_didChangeConfigurationHandler","onDidChangeConfiguration","e","hasChanged","_unhookEvents","_hoverVisibleKey","hoverVisible","bindTo","get","editor","getContribution","ID","hideWidgetsEventHandler","_hideWidgets","hoverOpts","getOption","_isHoverEnabled","enabled","_isHoverSticky","sticky","add","onMouseDown","_onEditorMouseDown","onMouseUp","_onEditorMouseUp","onMouseMove","_onEditorMouseMove","onKeyDown","_onKeyDown","onDidChangeModelDecorations","_onModelDecorationsChanged","onMouseLeave","onDidChangeModel","onDidScrollChange","_onEditorScrollChanged","clear","_a","_b","onModelDecorationsChanged","scrollTopChanged","scrollLeftChanged","mouseEvent","targetType","type","detail","_c","_d","_e","event","browserEvent","view","getSelection","isCollapsed","isColorPickerVisible","contentWidget","_getOrCreateContentWidget","maybeShowAt","hide","position","startShowingAt","lineNumber","keyCode","createInstance","showContentHover","range","mode","focus","startShowingAtRange","dispose","ShowHoverAction","id","label","localize","comment","alias","precondition","undefined","kbOpts","kbExpr","editorTextFocus","primary","weight","run","accessor","hasModel","controller","getPosition","column","ShowDefinitionPreviewHoverAction","goto","promise","startFindDefinitionFromCursor","then","theme","collector","editorHoverHighlightColor","getColor","addRule","hoverBackground","hoverBorder","transparent","link","linkHover","hoverForeground","actionsBackground","codeBackground"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { KeyChord } from '../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { Range } from '../../common/core/range.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { GotoDefinitionAtPositionEditorContribution } from '../gotoSymbol/link/goToDefinitionAtPosition.js';\nimport { ModesContentHoverWidget } from './modesContentHover.js';\nimport { ModesGlyphHoverWidget } from './modesGlyphHover.js';\nimport * as nls from '../../../nls.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, editorHoverHighlight, editorHoverStatusBarBackground, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nlet ModesHoverController = class ModesHoverController {\n    constructor(_editor, _instantiationService, _openerService, _modeService, _contextKeyService) {\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._openerService = _openerService;\n        this._modeService = _modeService;\n        this._toUnhook = new DisposableStore();\n        this._isMouseDown = false;\n        this._hoverClicked = false;\n        this._contentWidget = null;\n        this._glyphWidget = null;\n        this._hookEvents();\n        this._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(52 /* hover */)) {\n                this._unhookEvents();\n                this._hookEvents();\n            }\n        });\n        this._hoverVisibleKey = EditorContextKeys.hoverVisible.bindTo(_contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(ModesHoverController.ID);\n    }\n    _hookEvents() {\n        const hideWidgetsEventHandler = () => this._hideWidgets();\n        const hoverOpts = this._editor.getOption(52 /* hover */);\n        this._isHoverEnabled = hoverOpts.enabled;\n        this._isHoverSticky = hoverOpts.sticky;\n        if (this._isHoverEnabled) {\n            this._toUnhook.add(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n            this._toUnhook.add(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n            this._toUnhook.add(this._editor.onDidChangeModelDecorations(() => this._onModelDecorationsChanged()));\n        }\n        else {\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        this._toUnhook.add(this._editor.onMouseLeave(hideWidgetsEventHandler));\n        this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\n        this._toUnhook.add(this._editor.onDidScrollChange((e) => this._onEditorScrollChanged(e)));\n    }\n    _unhookEvents() {\n        this._toUnhook.clear();\n    }\n    _onModelDecorationsChanged() {\n        var _a, _b;\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.onModelDecorationsChanged();\n        (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.onModelDecorationsChanged();\n    }\n    _onEditorScrollChanged(e) {\n        if (e.scrollTopChanged || e.scrollLeftChanged) {\n            this._hideWidgets();\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        this._isMouseDown = true;\n        const targetType = mouseEvent.target.type;\n        if (targetType === 9 /* CONTENT_WIDGET */ && mouseEvent.target.detail === ModesContentHoverWidget.ID) {\n            this._hoverClicked = true;\n            // mouse down on top of content hover widget\n            return;\n        }\n        if (targetType === 12 /* OVERLAY_WIDGET */ && mouseEvent.target.detail === ModesGlyphHoverWidget.ID) {\n            // mouse down on top of overlay hover widget\n            return;\n        }\n        if (targetType !== 12 /* OVERLAY_WIDGET */ && mouseEvent.target.detail !== ModesGlyphHoverWidget.ID) {\n            this._hoverClicked = false;\n        }\n        this._hideWidgets();\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._isMouseDown = false;\n    }\n    _onEditorMouseMove(mouseEvent) {\n        var _a, _b, _c, _d, _e;\n        let targetType = mouseEvent.target.type;\n        if (this._isMouseDown && this._hoverClicked) {\n            return;\n        }\n        if (this._isHoverSticky && targetType === 9 /* CONTENT_WIDGET */ && mouseEvent.target.detail === ModesContentHoverWidget.ID) {\n            // mouse moved on top of content hover widget\n            return;\n        }\n        if (this._isHoverSticky && !((_b = (_a = mouseEvent.event.browserEvent.view) === null || _a === void 0 ? void 0 : _a.getSelection()) === null || _b === void 0 ? void 0 : _b.isCollapsed)) {\n            // selected text within content hover widget\n            return;\n        }\n        if (!this._isHoverSticky && targetType === 9 /* CONTENT_WIDGET */ && mouseEvent.target.detail === ModesContentHoverWidget.ID\n            && ((_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.isColorPickerVisible())) {\n            // though the hover is not sticky, the color picker needs to.\n            return;\n        }\n        if (this._isHoverSticky && targetType === 12 /* OVERLAY_WIDGET */ && mouseEvent.target.detail === ModesGlyphHoverWidget.ID) {\n            // mouse moved on top of overlay hover widget\n            return;\n        }\n        if (!this._isHoverEnabled) {\n            this._hideWidgets();\n            return;\n        }\n        const contentWidget = this._getOrCreateContentWidget();\n        if (contentWidget.maybeShowAt(mouseEvent)) {\n            (_d = this._glyphWidget) === null || _d === void 0 ? void 0 : _d.hide();\n            return;\n        }\n        if (targetType === 2 /* GUTTER_GLYPH_MARGIN */ && mouseEvent.target.position) {\n            (_e = this._contentWidget) === null || _e === void 0 ? void 0 : _e.hide();\n            if (!this._glyphWidget) {\n                this._glyphWidget = new ModesGlyphHoverWidget(this._editor, this._modeService, this._openerService);\n            }\n            this._glyphWidget.startShowingAt(mouseEvent.target.position.lineNumber);\n            return;\n        }\n        this._hideWidgets();\n    }\n    _onKeyDown(e) {\n        if (e.keyCode !== 5 /* Ctrl */ && e.keyCode !== 6 /* Alt */ && e.keyCode !== 57 /* Meta */ && e.keyCode !== 4 /* Shift */) {\n            // Do not hide hover when a modifier key is pressed\n            this._hideWidgets();\n        }\n    }\n    _hideWidgets() {\n        var _a, _b, _c;\n        if ((this._isMouseDown && this._hoverClicked && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()))) {\n            return;\n        }\n        this._hoverClicked = false;\n        (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\n        (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\n    }\n    _getOrCreateContentWidget() {\n        if (!this._contentWidget) {\n            this._contentWidget = this._instantiationService.createInstance(ModesContentHoverWidget, this._editor, this._hoverVisibleKey);\n        }\n        return this._contentWidget;\n    }\n    isColorPickerVisible() {\n        var _a;\n        return ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()) || false;\n    }\n    showContentHover(range, mode, focus) {\n        this._getOrCreateContentWidget().startShowingAtRange(range, mode, focus);\n    }\n    dispose() {\n        var _a, _b;\n        this._unhookEvents();\n        this._toUnhook.dispose();\n        this._didChangeConfigurationHandler.dispose();\n        (_a = this._glyphWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.dispose();\n    }\n};\nModesHoverController.ID = 'editor.contrib.hover';\nModesHoverController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IOpenerService),\n    __param(3, IModeService),\n    __param(4, IContextKeyService)\n], ModesHoverController);\nexport { ModesHoverController };\nclass ShowHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showHover',\n            label: nls.localize({\n                key: 'showHover',\n                comment: [\n                    'Label for action that will trigger the showing of a hover in the editor.',\n                    'This allows for users to show the hover without using the mouse.'\n                ]\n            }, \"Show Hover\"),\n            alias: 'Show Hover',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 39 /* KeyI */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const focus = editor.getOption(2 /* accessibilitySupport */) === 2 /* Enabled */;\n        controller.showContentHover(range, 1 /* Immediate */, focus);\n    }\n}\nclass ShowDefinitionPreviewHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showDefinitionPreviewHover',\n            label: nls.localize({\n                key: 'showDefinitionPreviewHover',\n                comment: [\n                    'Label for action that will trigger the showing of definition preview hover in the editor.',\n                    'This allows for users to show the definition preview hover without using the mouse.'\n                ]\n            }, \"Show Definition Preview Hover\"),\n            alias: 'Show Definition Preview Hover',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        let controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        if (!position) {\n            return;\n        }\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const goto = GotoDefinitionAtPositionEditorContribution.get(editor);\n        const promise = goto.startFindDefinitionFromCursor(position);\n        promise.then(() => {\n            controller.showContentHover(range, 1 /* Immediate */, true);\n        });\n    }\n}\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController);\nregisterEditorAction(ShowHoverAction);\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const editorHoverHighlightColor = theme.getColor(editorHoverHighlight);\n    if (editorHoverHighlightColor) {\n        collector.addRule(`.monaco-editor .hoverHighlight { background-color: ${editorHoverHighlightColor}; }`);\n    }\n    const hoverBackground = theme.getColor(editorHoverBackground);\n    if (hoverBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover { background-color: ${hoverBackground}; }`);\n    }\n    const hoverBorder = theme.getColor(editorHoverBorder);\n    if (hoverBorder) {\n        collector.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${hoverBorder}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\n    }\n    const link = theme.getColor(textLinkForeground);\n    if (link) {\n        collector.addRule(`.monaco-editor .monaco-hover a { color: ${link}; }`);\n    }\n    const linkHover = theme.getColor(textLinkActiveForeground);\n    if (linkHover) {\n        collector.addRule(`.monaco-editor .monaco-hover a:hover { color: ${linkHover}; }`);\n    }\n    const hoverForeground = theme.getColor(editorHoverForeground);\n    if (hoverForeground) {\n        collector.addRule(`.monaco-editor .monaco-hover { color: ${hoverForeground}; }`);\n    }\n    const actionsBackground = theme.getColor(editorHoverStatusBarBackground);\n    if (actionsBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${actionsBackground}; }`);\n    }\n    const codeBackground = theme.getColor(textCodeBlockBackground);\n    if (codeBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover code { background-color: ${codeBackground}; }`);\n    }\n});\n"]},"metadata":{},"sourceType":"module"}